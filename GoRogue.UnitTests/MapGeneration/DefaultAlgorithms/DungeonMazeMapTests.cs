using System.Collections.Generic;
using System.Linq;
using GoRogue.MapGeneration;
using GoRogue.MapGeneration.ContextComponents;
using SadRogue.Primitives;
using SadRogue.Primitives.GridViews;
using ShaiRandom.Generators;
using Xunit;
using Xunit.Abstractions;
using XUnit.ValueTuples;

namespace GoRogue.UnitTests.MapGeneration.DefaultAlgorithms
{
    public class DungeonMazeMapTests
    {
        private readonly ITestOutputHelper _output;

        #region Test Data


        // Seeds known to cause corner cases that, if connection algorithm doesn't choose true closest points,
        // will result in tunnels cutting through rooms (thus creating additional "doors")
        public static string[] TrueClosestEdgeCaseGenerators =
        {
            "#KnSR`0~1|7|-1|1|19|3|31|33|3|2|3|2|1|2|1|0|1|3|1|1|0|0|2|2|0|2|1|3|1|0|1|0|0|2|2|1|2|3|3|0|1|2|3|2|1|3|2|3|0|3|0|0|1|0|3|1|2|1|1|0|2|2|0|1|1|2|0|1|0|0|3|3|1|1|1|1|0|0|1|1|3|1|1|2|1|2|0|3|1|0|3|2|2|1|0|1|2|0|1|3|3|3|3|3|3|0|1|2|3|1|2|0|0|0|1|1|0|3|1|1|3|3|1|1|0|2|1|1|1|2|1|1|2|2|2|3|3|3|2|2|2|0|0|2|0|1|0|2|1|3|3|3|3|0|1|3|3|1|0|1|0|2|0|2|1|1|1|3|1|2|1|2|3|3|1|3|1|1|3|3|3|2|3|0|2|0|2|3|1|0|3|2|1|2|2|2|0|2|1|1|3|2|2|0|3|1|0|1|0|0|2|3|0|1|2|1|2|0|1|0|3|3|3|1|2|0|1|3|2|2|0|3|0|1|3|2|2|3|0|1|3|3|1|0|2|2|3|3|1|1|3|2|3|3|1|0|2|2|2|1|3|2|0|3|0|2|0|3|3|2|3|3|2|2|1|1|2|0|2|2|3|0|1|2|3|3|0|1|0|3|1|1|2|3|3|2|2|3|1|3|0|1|0|2|1|0|1|0|0|0|2|2|2|0|3|0|0|0|0|0|2|1|2|3|1|3|1|1|3|1|1|0|1|1|2|0|0|0|2|0|3|1|2|0|3|0|1|1|1|0|2|3|3|2|2|3|0|1|1|0|3|3|2|3|1|0|3|2|2|1|2|2|0|2|3|0|3|1|3|3|2|3|2|1|3|3|1|2|3|0|2|2|2|0|2|1|0|2|1|3|0|1|2|1|3|0|2|2|3|1|2|1|2|0|2|1|1|1|1|1|1|3|2|3|0|0|2|3|0|0|0|2|2|0|2|1|0|3|2|1|1|0|3|2|0|2|3|1|1|0|3|0|0|1|3|3|3|3|1|1|3|1|2|0|2|1|1|1|1|0|1|3|0|3|3|1|0|2|1|2|3|2|0|0|0|2|2|0|3|1|0|0|2|1|2|1|0|0|2|3|2|1|3|1|3|1|0|2|2|3|3|1|1|1|3|1|3|2|3|1|1|0|0|1|2|2|3|3|1|3|2|2|1|2|1|2|3|3|1|0|1|1|2|0|3|2|0|2|1|3|2|3|0|2|3|2|0|1|0|3|0|1|0|3|3|3|0|1|1|2|1|1|1|1|2|2|0|0|0|2|0|3|0|0|3|3|2|1|3|0|1|2|3|0|3|2|2|2|3|0|1|1|2|3|2|0|3|3|2|2|0|3|2|2|1|1|2|2|0|3|2|3|3|2|3|0|2|1|1|3|1|0|1|2|1|2|0|1|3|1|2|1|0|3|2|3|0|3|1|1|1|3|3|0|3|0|3|2|0|3|3|2|1|3|0|2|0|3|3|1|0|1|0|1|0|1|1|0|0|2|2|1|3|3|0|2|0|3|1|0|1|23|1|0|3|0|1|1|3|34|32|28|14|24|36|2|22|33|5|17|0|15|19|3|30|31|5|15|20|15|2|14|34|11|19|3|27|13|35|26|21|23|36|9|11|22|21|9|21|24|34|5|13|22|20|38|17|35|26|29|37|17|4|14|36|7|30|1|36|5|26|37|10|20|38|0|16|38|15|20|36|14|36|14|24|18|31|34|33|10|18|31|6|0|20|22|25|20|29|28|6|1|22|36|10|18|26|30|14|32|31|11|30|24|36|20|20|10|10|13|29|29|23|32|13|38|20|0|36|1|15|4|7|34|35|17|0|39|37|25|35|0|12|27|33|10|24|27|5|5|3|36|37|20|33|39|16|12|12|29|2|23|11|30|5|25|19|24|17|14|32|26|32|28|4|38|19|10|12|25|28|16|29|39|9|18|28|24|24|16|10|10|22|2|3|7|16|8|16|10|36|10|9|32|11|16|28|31|25|10|16|31|7|4|4|17|21|29|7|33|4|14|35|37|22|20|15|30|23|20|0|30|26|20|25|16|32|28|25|12|38|16|4|11|37|18|36|36|1|2|34|12|37|23|21|3|21|18|10|14|27|35|1|14|6|26|9|38|1|16|14|24|5|16|25|2|1|20|33|2|13|5|4|36|35|2|3|35|19|28|21|13|28|32|28|16|0|18|22|36|23|25|3|35|1|11|2|17|37|1|18|31|34|1|5|32|8|6|1|38|33|31|26|37|27|19|5|28|22|29|31|5|30|33|31|32|0|29|16|1|36|13|20|27|26|27|15|33|3|36|32|32|1|6|36|33|0|17|37|11|33|35|30|3|2|29|12|5|3|9|9|11|10|7|12|3|5|37|31|29|32|28|33|26|37|35|30|2|0|31|2|24|27|0|24|25|12|6|30|18|30|11|10|7|0|36|5|37|39|3|32|0|19|39|14|14|17|17|23|0|24|37|15|34|33|36|1|6|1|31|13|22|22|0|30|7|4|0|39|35|30|7|1|39|37|9|8|35|11|2|6|18|3|33|3|14|33|10|0|27|7|6|3|6|20|29|29|39|3|11|0|10|31|27|17|4|9|23|12|26|15|3|39|17|20|0|2|2|37|0|1|18|29|3|4|5|10|17|14|14|29|19|21|25|24|14|21|7|35|5|26|3|9|25|25|27|11|32|1|9|38|29|4|38|8|25|32|24|22|12|11|5|8|0|15|24|15|20|24|38|21|19|4|28|23|3|20|38|13|37|13|11|15|0|12|28|18|32|11|20|20|17|31|33|10|2|6|15|3|2|12|19|5|12|10|20|23|8|29|12|30|18|5|5|15|31|21|30|33|39|36|13|37|28|34|24|15|35|21|37|29|18|9|2|8|11|33|34|32|34|22|33|23|38|9|29|15|29|7|34|16|28|19|32|5|34|2|2|9|37|39|25|6|31|36|26|27|10|14|37|39|31|8|11|3|30|24|5|33|24|24|0|26|32|21|2|12|16|13|6|0|37|19|26|5|33|36|33|4|29|31|5|18|1|21|38|31|8|11|22|33|14|32|29|27|30|18|26|25|0|18|16|2|18|6|24|30|37|7|18|26|0|3|19|20|14|39|29|11|28|33|19|31|27|0|10|32|27|4|8|33|20|17|8|1|0|31|22|28|38|0|11|27|1|6|1|0|27|13|10|11|30|22|19|33|2|0|1|2|3|2|0|3|1|0|1|3|3|2|0|2|0|3|2|2|0|0|1|1|3|1|2|3|2|1|1|1|1|1|3|0|3|0|0|2|3|1|1|1|3|0|2|3|0|2|0|0|1|3|3|3|2|3|1|0|2|2|3|3|3|2|2|0|2|3|0|0|1|0|0|3|0|1|0|2|3|0|2|1|2|1|3|2|3|0|3|2|2|2|0|3|3|1|0|3|3|3|2|2|2|0|2|2|2|2|0|2|1|1|0|2|3|3|3|0|1|2|1|3|3|2|1|2|2|0|0|0|2|1|0|1|1|3|2|3|2|1|3|2|1|3|2|2|1|2|2|0|3|0|1|1|2|2|1|3|1|3|2|0|2|0|1|1|2|3|3|3|0|0|2|1|2|1|3|0|3|2|1|0|1|1|0|3|0|0|3|0|1|0|2|2|3|3|2|3|2|0|3|1|3|1|0|2|1|0|1|0|3|1|3|0|1|3|1|3|0|2|1|3|2|0|1|2|1|1|2|3|0|2|2|1|2|3|3|2|2|0|2|2|2|2|1|1|0|1|2|1|2|0|2|0|1|2|3|1|0|2|2|3|0|3|2|0|3|0|0|2|0|2|3|2|2|3|3|1|3|1|1|2|1|2|3|1|3|0|2|1|3|2|1|0|0|0|2|0|3|2|1|0|2|3|1|1|3|0|1|3|1|2|2|0|1|3|0|0|2|2|3|1|3|2|1|0|1|3|1|1|0|3|2|3|0|3|2|3|3|3|1|1|1|2|1|2|2|0|3|3|3|1|2|3|1|3|1|1|1|3|0|1|2|2|0|1|3|0|0|2|0|1|0|3|3|3|1|1|2|1|3|3|2|2|3|0|0|1|2|0|3|0|1|3|1|0|1|1|0|0|3|2|2|1|3|2|2|1|3|2|2|3|1|1|2|3|1|1|3|3|2|2|3|3|0|3|2|2|1|1|1|0|2|3|0|0|0|0|0|1|0|0|3|0|1|0|0|3|2|0|2|2|2|1|3|3|3|2|0|2|0|3|1|3|0|0|3|0|2|0|2|3|2|2|3|3|3|2|0|1|0|3|2|3|0|3|0|0|0|0|3|3|1|1|2|2|1|3|2|1|2|1|0|0|3|3|2|2|2|3|3|3|2|0|1|3|3|3|0|3|1|3|2|2|0|2|0|1|2|1|2|3|3|3|0|2|3|2|3|1|2|3|0|1|3|3|0|0|2|2|3|3|1|1|0|0|3|3|3|3|0|1|1|2|1|0|1|2|0|2|0|1|3|1|1|0|3|2|3|1|1|0|1|1|1|3|1|3|3|3|3|3|1|1|3|1|3|2|3|1|0|3|3|1|0|0|3|1|3|1|3|3|0|2|2|1|3|2|2|1|3|1|0|1|3|3|2|1|0|1|3|2|2|3|2|3|2|3|1|1|1|2|1|2|3|3|2|1|2|1|3|1|2|3|3|1|0|39|0|23|39|5|18|33|0|6|37|0|31|33|25|22|0|6|23|16|24|28|2|21|31|17|25|2|19|17|11|39|21|17|35|18|9|19|16|2|5|10|22|36|2|23|21|6|1|6|5|13|28|7|0|0|1|17|24|29|10|21|31|12|17|13|10|3|23|13|38|22|9|26|8|39|36|15|22|34|36|17|24|14|17|38|11|32|15|20|9|34|21|32|11|19|10|36|38|0|31|15|3|9|3|39|38|27|20|8|13|13|24|33|34|9|25|27|20|7|30|5|27|21|35|2|13|11|9|11|11|31|0|21|26|15|30|33|11|36|36|21|16|36|8|11|4|13|8|17|4|22|19|31|14|10|6|18|38|22|19|13|26|36|22|4|35|21|33|9|23|2|4|0|5|36|11|17|18|24|21|11|7|15|5|25|10|1|4|29|29|6|24|29|30|26|18|11|28|37|21|8|8|29|22|6|38|17|36|5|4|38|24|17|28|21|31|17|38|3|35|5|26|23|12|7|20|14|0|1|22|3|16|14|14|15|24|29|13|36|4|15|27|29|7|10|15|9|3|15|22|16|29|3|3|28|9|31|39|26|6|7|18|1|32|3|27|15|23|27|33|34|32|3|11|12|21|12|4|32|35|4|29|21|32|24|3|33|25|29|27|2|2|17|30|4|29|24|20|2|23|29|28|17|12|31|12|13|29|20|37|37|10|26|26|24|27|33|30|13|38|6|39|19|23|38|2|30|21|28|36|2|13|10|18|37|32|29|27|11|34|34|11|5|27|22|14|38|15|8|27|21|4|12|34|38|15|31|0|19|31|31|15|32|31|21|33|18|0|4|13|39|29|6~0~~0~~0~True|True~0~~0~0.5|0.86|0.87|0.75|0.07|0.18|0.04|0.28|0.03|0.32|0.06|0.81|0.84|0.62|0.98|0.54|0.93|0.67|0.07|0.38|0.9|0.34|0.61|0.65|0.42|0.52|0.74|0.21|0.92|0.09|0.65|0.55|0.55|0.91|0.85|0.29|0.8|0.73|0.24|0.78|0.06|0.46|0.76|0.78|0.51|0.67|0.3|0.54|0.89|0.54|0.37|0.44|0.64|0.06|0.34|0.42|0.54|0.91|0.74|0.17|0.89|0.99|0.09|0.88|0.19|0.34|0.43|0.39|0.01|0.51|0.4|0.25|0.05|0.6|0.86|0.12|0.16|0.77|0.27|0.51|0.45|0.21|0.69|0.14|0.72|0.22|0.57|0.3|0.36|0.84|0.2|0.88|0.25|0.07|0.99|0.75|0.41|0.24|0.29|0.97|0.65|0.38|0.95|0.37|0.82|0.85|0.41|0.26|0.31|0.4|0.41|0.05|0.14|0.02|0.49|0.74|0.65|0.26|0.06|0.47|0.84|0.87|0.49|0.95|0.39|0.42|0.45|0.92|0.91|0.65|0.18|0.18|0.66|0.72|0.58|0.2|0.01|0.56|0.19|0.94|0.5|0.01|0.58|0.31|0.89|0.13|0.85|0.05|0.84|0.86|0.19|0.79|0.89|0.1|0.03|0.6|0.67|0.02|0.23|0.86|0.06|0.43|0.43|0.02|0.79|0.9|0.06|0.8|0.64|0.3|0.42|0.74|0.22|0.72|0.18|0.4|0.53|0.35|0.79|0.99|0.68|0.9|0.97|0.56|0.61|0|0.58|0.9|0.37|0.06|0.06|0.63|0.99|0.83|0.39|0.99|0.58|0.38|0.94|0.17|0.14|0.15|0.84|0.59|0.17|0.93|0.83|0.81|0.16|0.38|0.57|0.74|0.33|0.72|0.67|0.66|0.74|0.35|0.88|0.57|0.24|0.48|0.96|0.88|0.98|0.22|0.81|0.21|0.21|0.3|0.44|0.24|0.75|0.69|0.77|0.39|0.42|0.99|0.22|0.29|0.72|0.64|0.49|0.4|0.02|0.28|0.2|0.28|0.02|0.09|0.85|0.7|0.85|0.28|0.99|0.57|0|0.32|0.58|0.71|0.6|0.01|0.16|0.88|0.88|0.92|0.59|0.94|0.3|0.52|0.53|0.66|0.82|0.96|0.6|0.44|0.81|0.51|0.34|0.82|0.99|0.71|0.78|0.67|0.36|0.88|0.98|0.75|0.65|0.17|0.44|0.66|0.53|0.67|0.29|0.01|0.21|0.75|0.38|0.35|0.29|0.68|0.5|0.12|0.41|0.96|0.37|0.37|0.08|0.25|0.7|0.88|0.63|0.92|0.5|0.4|0.68|0.1|0.53|0.06|0.41|0.02|0.33|0.96|0.52|0.9|0.2|0.36|0.09|0.85|0.11|0.6|0.35|0.05|0.48|0.37|0.87|0.1|0.92|0.44|0.29|0.51|0.63|0.86|0|0.61|0.02|0.17|0.51|0.58|0.13|0.13|0.55|0.4|0.92|0.34|0.92|0.29|0.97|0.23|0.97|0.57|0.05|0.85|0.22|0.98|0.17|0.16|0.59|0.84|0.71|0.81|0.67|0.72|0.36|0.9|0.49|0.97|0.4|0.27|0.53|0.93|0.13|0.25|0.17|0.64|0.51|0.86|0.07|0.71|0.89|0.29|0.65|0.22|0.27|0.61|0.67|0.99|0.16|0.72|0.68|0.3|0.2|0.51|0.22|0.66|0.23|0.95|0.96|0.53|0.53|0.7|0.25|0.01|0.69|0.4|0.1|0.37|0.02|0.32|0.68|0.66|0.89|0.96|0.56|0.23|0.39|0.02|0.92|0.71|0.26|0.09|0.7|0.8|0.96|0.14|0.47|0.32|0.6|0.13|0.58|0.19|0.24|0.46|0.88|0.49|0.7|0.37|0.33|0.73|0.72|0.23|0.94|0.36|0.97|0.21|0.12|0.51|0.19|0.36|0.88|0.81|0.32|0.45|0.19|0.53|0.04|0.66|0.94|0.79|0.13|0.73|0.16|0.51|0.33|0.61|0.55|0.97|0.6|0.46|0.67|0.47|0.93|0.18|0.24|0.99|0.87|0.84|0.58|0.58|0.86|0.54|0.93|0.77|0.25|0.24|0.25|0.69|0.6|0.01|0.96|0.35|0.46|0.66|0.32|0.44|0.97|0.3|0.14|0.97|0.21|0.18|0.84|0.84|0.34|0.57|0.34|0.84|0.03|0.28|0.09|0.07|0.07|0.14|0.76|0.71|0.47|0.7|0.19|0.72|0.93|0.58|0.63|0.89|0.67|0.15|0.26|0.3|0.27|0.63|0.92|0.16|0.52|0.2|0.34|0.48|0.58|0.73|0.85|0.85|0.68|0.37|0.46|0.34|0.55|0.33|0.18|0.19|0.18|0.73|0.06|0.79|0.74|0.57|0.93|0.1|0.66|0.28|0.91|0.9|0.81|0.25|0.43|0.89|0.39|0.86|0.36|0.07|0.5|0.53|0.49|0.76|0.36|0.85|0.9|0.78|0.65|0.32|0.65|0.9|0.95|0.09|0.55|0.92|0.98|0.64|0.13|0.8|0.58|0|0.01|0.3|0.44|0.52|0.37|0.73|0.4|0.52|0.74|0.19|0.66|0.09|0.87|0.34|0.55|0.86|0.87|0.01|0.74|0.36|0.85|0.97|0.59|0.02|0.59|0.74|0.04|0.07|0.35|0.81|0.33|0.42|0.26|0.83|0.71|0.39|0.56|0.91|0.27|0.45|0.48|0.17|0.87|0.29|0.69|0.53|0.86|0.85|0.3|0.3|0.64|0.36|0.63|0.63|0.37|0.65|0.31|0.15|0.46|0.18|0.99|0.74|0.39|0.33|0.65|0.2|0.02|0.96|0.57|0.04|0.85|0.65|0.6|0.11|0.77|0.62|0.51|0.43|0.75|0.24|0.1|0.94|0.59|0.16|0.14|0.08|0.26|0.61|0.56|0.09|0.4|0.21|0.38|0.59|0.4|0.92|0.43|0.39|0.44|0.63|0.44|0.66|0.96|0.04|0.35|0.3|0.16|0.93|0.28|0.5|0.2|0.11|0.22|0.85|0.12|0.98|0.19|0.58|0.32|0.4|0.26|0.94|0.51|0.06|0.89|0.3|0.28|0.98|0.71|0.56|0.33|0.98|0.41|0.45|0.85|0.36|0.13|0.17|0.13|0.53|0.9|0.68|0.59|0.22|0.02|0.97|0.03|0.45|0.43|0.21|0.09|0.34|0.08|0.98|0.94|0.4|0.56|0.14|0.24|0.23|0.18|0.81|0.54|0.08|0.28|0.48|0.36|0.3|0.65|0.32|0.46|0.3|0.06|0.93|0.1|0.65|0.58|0.23|0.32|0|0.74|0.29|0.44|0.66|0.08|0.32|0.18|0.28|0.55|0.23|0.23|0.25|0.7|0.69|0.98|0.17|0.3|0.96|0.82|0.89|0.21|0.99|0.43|0.81|0.01|0.66|0.5|0.56|0.05|0.65|0.87|0.75|0.36|0.29|0.96|0.42|0.69|0.05|0.44|0.46|0.89|0.98|0.65|0.64|0.46|0.79|0.21|0.64|0.04|0.13|0.71|0.81|0.31|0.7|0.1|0.63|0.25|0.25|0.83|0.88|0.06|0.95|0.38|0.49|0.49|0.13|0.85|0.15|0.95|0.68|0.86|0.87|0.25|0.88|0.74|0.14|0.13|0.34|0.65|0.31|0.27|0.97|0.73|0.87|0.63|0.6|0.26|0.37|0.07|0.94|0.26|0.09|0.54|0.52|0.26|0.45|0.23|0.08|0.76|0.02|0.3|0.85|0.94|0.92|0.52|0.18|0.77|0.83|0.04|0.88|0.25|0.76|0.95|0.02|0.05|0.16|0.54|0.28|0.4|0.03|0.39|0.27|0.21|0.83|0.86|0.86|0.9|0.84|0.64|0.91|0.11|0.94|0.5|0.74|0.6|0.92|0.66|0.22|0.4|0.93|0.35|0.91|0.19|0.05|0.17|0.04|0.45|0.08|0.04|0.32|0.56|0.91|0.7|0.47|0.07|0.25|0.85|0.7|0.24|0.71|0.41|0.46|0.88|0.39|0.44|0.5|0.77|0.57|0.8|0.3|0.4|0.12|0.39|0.77|0.46|0.98|0.69|0.45|0.82|0.34|0.14|0.04|0.93|0.7|0.18|0.59|0.28|0.31|0.43|0.6|0.38|0.62|0.56|0.56|0.81|0.88|0.94|0.93|0.1|0.14|0.5|0.92|0.14|0.45|0.75|0.6|0.02|0.31|0.04|0.61|0.5|0.84|0.82|0.61|0.85|0.47|0.49|0.57|0.13|0.89|0.38|0.07|0.96|0.88|0.91|0.2|0.68|0.38|0.01|0.94|0.37|0.71|0.26|0.78|0.12|0.99|0.6|0.02|0.98|0.22|0.72|0.31|0.2|0.04|0.65|0.44|0.51|0.14|0.94|0.3|0.71|0.46|0.45|0.06|0.12|0.12|0.62|0.86|0.95|0.32|0.82|0.18|0.32|0.86|0.79|0.09|0.06|0.21|0.5|0.21|0.11|0.45|0.08|0.4|0.99|0.71|0.12|0.86|0.93|0.82|0.83|0.01|0.97|0.69|0.46|0.75|0.83|0.41|0.92|0.69|0.22|0.95|0.85|0.26|0.26|0.68|0.88|0.8|0.62|0.17|0.25|0.69|0.13|0.63|0.51|0.71|0.9|0.55|0.8|0.01|0.47|0.76|0.37|0.08|0.98|0.98|0.21|0.34|0.48|0.8|0.72|0.45|0.57|0.25|0.61|0.8|0.14|0.77|0.1|0.52|0.49|0.69|0.25|0.38|0.92|0.43|0.81|0.5|0.99|0.87|0.04|0.27|0.75|0.9|0.7|0.99|0.33|0.82|0.49|0.85|0.78|0.7|0.6|0.3|0.89|0.62|0.53|0.29|0.9|0.06|0.43|0.84|0.7|0.46|0.58|0.34|0.01|0.69|0|0.58|0.65|0.66|0.35|0.23|0.01|0.41|0.27|0.89|0.76|0.56|0.8|0.23|0.77|0.04|0.18|0.42|0.24|0.34|0.74|0.76|0.93|0.64|0.47|0.66|0.05|0.51|0.37|0.16|0.77|0.15|0.99|0|0.37|0.69|0.52|0.68|0.22|0.65|0.11|0.92|0.77|0.14|0.19|0.83|0.52|0.19|0.1|0.75|0.86|0.56|0.59|0.34|0.4|0.84|0.59|0.24|0.24|0.35|0.82|0.82|0.03|0.8|0.4|0.67|0.41|0.41|0.08|0.13|0.8|0.28|0.37|0.12|0.79|0.32|0.32|0.42|0.6|0.63|0.94|0.72|0.18|0.92|0.06|0.54|0.81|0.87|0.59|0.82|0.74|0.11|0.32|0.77|0.68|0.13|0.54|0.55|0.55|0.07|0.45|0.89|0.38|0.87|0.43|0.2|0.26|0.59|0.77|0.89|0.24|0.83|0.06|0.25|0.49|0.16|0.68|0.48|0.25|0.47|0.91|0.5|0.93|0.52|0.86|0.98|0.07|0.34|0.2|0.91|0.14|0.38|0.59|0.99|0.49|0.27|0.06|0.62|0.67|0.91|0.94|0.54|0.81|0.55|0.37|0.95|0.44|0.46|0.2|0.57|0.81|0.94|0.97|0.23|0.98|0.18|0.43|0.83|0.52|0.51|0.71|0.43|0.56|0.76|0.07|0.15|0.86|0.51|0.27|0.78|0.02|0.54|0.66|0.18|0.07|0.49|0.67|0.08|0.58|0.44|0.2|0.09|0.9|0.47|0.82|0.1|0.07|0.11|0.11|0.84|0.79|0.36|0.75|0.92|0.65|0.02|0.16|0.04|0.27|0.09|0.86|0.03|0.54|0.54|0.01|0.33|0.75|0.4|0.37|0.84|0.18|0.49|0.55|0.16|0.38|0.33|0.28|0.53|0.37|0.9|0.2|0.19|0.42|0.68|0.24|0.78|0.62|0.46|0.19|0.73|0.5|0.86|0.99|0.39|0.59|0.92|0.86|0.94|0.14|0.42|0.1|0.73|0.05|0.54|0.84|0.61|0.78|0.57|0.11|0.13|0.05|0.96|0.25|0.69|0.78|0.16|0.06|0.23|0.57|0.28|0.87|0.34|0.43|0.41|0.93|0.55|0.52|0.57|0.15|0.6|0.23|0.32|0|0.39|0|0.89|0.35|0.33|0.62|0.01|0.6|0.26|0.92|0.05|0.82|0.77|0.76|0.9|0.89|0.02|0.52|0.81|0.71|0.22|0.28|0.44|0.73|0.23|0.44|0.92|0.43|0.41|0.02|0.96|0.5|0.66|0.54|0.27|0.19|0.31|0.07|0.46|0.87|0.66|0.2|0.04|0.48|0.56|0.01|0.53|0.22|0.42|0.32|0.35|0.47|0.71|0.12|0.07|0.31|0.57|0.67|0.11|0.94|0.7|0.68|0.85|0.68|0.49|0.43|0.73|0.84|0.97|0.04|0.16|0.76|0.16|0.06|0.44|0.99|0.32|0.33|0.03|0.61|0.35|0.9|0.72|0.55|0.63|0.77|0.53|0.25|0.3|0.33|0.19|0.8|0.02|0.35|0.45|0.99|0.82|0.85|0.46|0.11|0.85|0.48|0.22|0.42|0.01|0.87|0.43|0.39|0.23|0.95|0.59|0.08|0.13|0.94|0.83|0.56|0.63|0.64|0.52|0.47|0.06|0.18|0.42|0.55|0.35|0.57|0.46|0.17|0.92|0.18|0.4|0.51|0.98|0.97|0.96|0.01|0.77|0.86|0.01|0.77|0.78|0.55|0.78|0.91|0.13|0.83|0.9|0.7|0.76|0.52|0.7|0.28|0.9|0.65|0.12|0.98|0.1|0.78|0.13|0.31|0.19|0.93|0.55|0.04|0.14|0.13|0.77|0.15|0.3|0.04|0.28|0.98|0.71|0.55|0.69|0.69|0.38|0.05|0.22|0.46|0.85|0.72|0.83|0.88|0.51|0.74|0.02|0.42|0.05|0.47|0.03|0.75|0.85|0.91|0.8|0.98|0.43|0.87|0.01|0.1|0.48|0.02|0.59|0.85|0.08|0.79|0.67|0.62|0.65|0.71|0.24|0.85|0.31|0.69|0.61|0.75|0.81|0.39|0.12|0.57|0.42|0.43|0.66|0.3|0.43|0.08|0.69|0.23|0.04|0.77|0.07|0.75|0.93|0.84|0.78|0.82|0.17|0.17|0.72|0.65|0.26|0.94|0.49|0.16|0.44|0.79|0.21|0.43|0.8|0.54|0.96|0.5|0.2|0.77|0.84|0.06|0.4|0.32|0.94|0.39|0.01|0.72|0.39|0.99|0.48|0.06|0.79|0.18|0.79|0.51|0.52|0.62|0.41|0.8|0.62|0.92|0.43|0.05|0.34|0.73|0.6|0.97|0.69|0.18|0.85|0.2|0.2|0.45|0.92|0.56|0.85|0.08|0.07|0.7|0.29|0.59|0.06|0.58|0.72|0.71|0.81|0.11|0.89|0.21|0.51|0.57|0.38|0.73|0.69|0.33|0.45|0.87|0.86|0.77|0.37|0.95|0.46|0.33|0.67|0.29|0.54|0.29|0.01|0.77|0|0.58|0.94|0.59|0.16|0.7|0.3|0.03|0.18|0.12|0.85|0.88|0.95|0.83|0.51|0.28|0.24|0.24|0.38|0.83|0.31|0.04|0.4|0.22|0.27|0.8|0.48|0.88|0.8|0.38|0.03|0.65|0.83|0.65|0.34|0.76|0.15|0.44|0.89|0.03|0.5|0.83|0.17|0.18|0.1|0.46|0.45|0.61|0.5|0.31|0.52|0.66|0.68|0.2|0.87|0.67|0.14|0.83|0.05|0.44|0.93|0.31|0.15|0.08|0.88|0.59|0.34|0.2|0.98|0.51|0.08|0.26|0.34|0.37|0.5|0.04|0.72|0.32|0.21|0.32|0.26|0.15|0.85|0.64|0.81|0.58|0.24|0.14|0.35|0.35|0.37|0.33|0.11|0.32|0.65|0.64|0.56|0.69|0.9|0.6|0.31|0.69|0.55|0.85|0.57|0.04|0.65|0.62|0.3|0.27|0.17|0.62|0.98|0.45|0.55|0.9|0.96|0.88|0.06|0.83|0.26|0.19|0.4|0.12|0.75|0.97|0.74|0.26|0.72|0.24|0.87|0.2|0.72|0.46|0.3|0.11|0.47|0.7|0.8|0.27|0.63|0.69|0.09|0.68|0.9|0.46|0.01|0|0.57|0.09|0.48|0.08|0.86|0.38|0.69|0.55|0.14|0.72|0.42|0.33|0.55|0.07|0.87|0.49|0.37|0.48|0.6|0.46|0.54|0.49|0.88|0.32|0.31|0.57|0.41|0.87|0.37|0.85|0.16|0.65|0.93|0.07|0.33|0.22|0.1|0.78|0.92|0.84|0.53|0.7|0.49|0.29|0.46|0.96|0.74|0|0.13|0.49|0.92|0.5|0.93|0.11|0.01|0.13|0.94|0.45|0.59|0.33|0.85|0.16|0.76|0.35|0.42|0.55|0.85|0.32|0.61|0.37|0.32|0.73|0.3|0.59|0.11|0.82|0.51|0.59|0.54|0.97|0.68|0.3|0.32|0.07~0~~0~~0~`",
            "#KnSR`0~1|8|1|0|22|3|18|27|23|1|1|0|0|1|2|3|0|1|0|2|2|1|0|2|0|2|0|3|2|2|1|1|0|1|2|2|1|0|1|0|2|0|0|0|2|0|0|3|1|3|2|3|1|2|3|1|3|3|3|1|3|0|0|2|0|2|1|0|2|3|0|1|0|0|0|0|0|1|1|3|3|3|2|1|2|1|1|3|0|3|1|3|1|3|3|1|0|0|3|3|2|3|3|0|2|1|2|3|3|1|3|1|3|1|1|1|1|0|3|3|0|0|1|2|2|2|1|2|2|0|3|0|3|0|0|0|1|0|0|2|0|1|3|1|3|1|3|0|3|1|1|1|2|0|2|2|0|2|2|2|1|2|1|1|2|0|1|1|1|2|2|2|3|1|1|3|1|2|3|3|1|2|1|3|0|0|2|2|0|0|2|1|0|1|2|0|1|0|0|2|0|2|1|0|0|0|0|2|3|0|1|0|0|3|1|2|2|1|1|3|0|1|1|2|1|1|1|2|2|0|2|2|3|2|0|0|2|1|0|3|2|2|3|1|1|1|3|1|0|2|3|1|1|3|1|2|1|1|0|1|3|2|0|3|2|2|3|3|2|3|1|3|1|2|3|3|1|2|1|3|2|3|3|3|0|3|3|0|3|2|0|0|1|0|2|2|1|3|1|2|1|2|0|2|3|3|0|3|1|1|2|2|1|0|2|3|0|3|0|0|0|1|1|2|1|1|1|2|1|2|2|1|1|0|3|3|0|1|1|0|3|0|1|3|1|2|3|3|1|1|2|1|3|0|3|2|3|0|3|0|3|1|3|2|2|3|3|1|2|3|3|1|1|1|0|3|2|0|0|2|0|0|2|1|0|1|1|0|2|2|1|2|1|3|3|0|0|3|1|2|1|0|2|0|1|1|0|0|2|3|2|1|0|3|2|0|3|0|0|1|0|2|0|1|1|3|3|3|0|2|2|1|3|3|1|0|3|2|2|3|3|0|1|0|1|2|1|0|3|0|2|1|3|1|0|1|3|0|0|1|3|0|1|0|3|0|1|2|3|0|0|3|0|3|3|1|0|1|1|3|0|3|1|1|1|1|0|3|1|1|2|3|1|0|0|2|3|1|1|0|0|0|3|2|1|3|0|0|2|2|2|0|2|3|0|1|1|0|3|2|0|1|1|0|0|3|1|1|2|0|1|2|1|3|2|1|0|0|0|0|0|0|3|1|2|0|1|2|2|0|2|1|0|1|3|2|0|2|3|3|0|0|0|1|1|2|1|1|2|2|0|3|0|1|3|1|0|3|0|1|3|1|2|0|1|1|3|3|2|2|2|0|0|2|1|1|3|3|0|3|1|2|2|2|0|2|2|0|2|2|2|1|2|1|3|2|2|3|3|2|3|0|1|1|3|1|0|0|3|0|0|2|3|1|1|2|1|2|1|2|0|2|2|2|1|2|2|2|1|2|0|3|0|3|1|3|2|0|2|1|2|3|3|3|1|3|2|0|3|2|1|1|2|0|1|3|1|3|3|0|2|3|1|31|2|0|3|1|2|38|2|23|13|27|18|5|30|14|1|18|33|0|37|37|26|32|33|35|7|24|27|30|33|13|13|14|2|33|16|15|30|3|28|18|7|11|9|35|20|11|18|21|32|14|29|13|34|18|27|21|23|17|9|38|38|36|29|38|26|27|7|6|33|4|9|10|7|11|11|18|34|16|3|29|15|10|0|38|8|11|39|39|22|18|2|26|36|6|26|34|2|14|34|33|33|38|11|35|29|23|20|0|22|6|9|20|28|34|9|25|14|1|1|32|18|11|2|27|32|13|10|20|25|24|31|8|10|13|9|26|17|5|22|2|30|25|32|30|1|24|11|25|13|2|17|21|11|27|0|2|2|25|38|25|29|37|4|2|8|32|0|26|33|7|8|7|29|15|17|23|8|9|34|0|26|30|23|7|4|36|32|31|30|27|8|9|30|24|7|9|26|24|14|31|34|31|36|19|26|31|0|9|15|18|12|35|7|1|20|7|17|33|7|38|20|9|34|38|13|19|6|5|36|15|31|14|35|7|30|12|30|39|27|28|39|32|7|30|35|23|17|10|23|18|11|18|21|6|9|9|33|7|36|22|24|0|12|18|35|18|34|11|32|0|26|35|24|21|13|6|23|27|21|1|28|10|1|8|12|3|1|12|21|19|38|35|11|28|5|31|15|37|22|20|10|30|9|18|5|15|23|4|12|8|35|29|21|30|19|8|36|11|12|15|15|6|34|38|32|5|30|0|10|28|23|25|11|15|14|38|24|4|28|10|15|32|16|15|1|5|26|2|14|24|24|24|2|37|21|15|22|19|0|8|27|26|23|13|30|31|2|26|18|36|11|18|10|4|15|29|32|35|30|8|29|9|14|3|37|4|10|11|20|25|0|1|1|3|3|3|1|1|3|2|3|2|25|35|33|25|6|1|24|3|16|1|18|3|31|18|37|28|38|1|7|26|7|5|30|36|0|12|3|13|15|8|17|11|2|15|5|7|38|25|35|33|33|35|37|15|22|0|29|6|2|4|35|16|18|34|19|24|22|32|0|4|1|28|22|36|37|4|22|8|10|26|3|6|37|25|34|5|14|36|10|29|15|17|29|29|32|14|3|32|9|28|30|16|23|32|12|10|6|13|13|13|27|17|18|28|24|18|13|24|38|11|30|15|15|27|13|13|16|5|17|38|6|24|9|39|27|29|29|34|24|3|22|7|3|17|20|17|10|26|15|26|18|10|38|27|38|27|23|25|26|36|2|16|34|9|0|2|18|28|4|11|8|12|21|22|21|9|27|29|2|29|29|5|0|6|36|34|15|3|34|23|35|34|3|32|11|10|39|36|26|37|23|2|22|2|1|23|0|9|13|31|12|26|4|32|15|10|9|6|13|0|4|34|23|3|18|9|3|26|21|35|6|25|18|38|25|0|10|11|3|27|39|16|39|35|39|6|37|37|35|28|13|22|17|31|34|3|8|5|31|4|7|35|3|33|22|25|37|17|14|26|14|32|35|7|24|5|36|30|20|32|36|26|6|17|24|19|14|14|4|3|35|38|10|4|23|38|0|21|6|20|34|19|16|23|19|4|32|0|13|8|30|26|29|6|16|12|16|23|26|12|16|1|35|22|38|4|3|39|38|24|1|4|13|1|17|6|16|21|12|34|8|21|31|16|8|32|30|39|22|12|0|0|7|20|11|24|17|10|17|29|2|7|38|15|4|7|5|26|16|22|36|20|32|28|34|31|34|8|13|14|19|30|14|33|15|31|22|38|19|7|9|0|38|24|33|14|36|18|30|15|13|38|30|33|2|23|22|18|24|14|5|3|2~0~~0~~0~False|False~0~~0~0.78|0.13|0.92|0.84|0.89|0.45|0.68|0.08|0|0.77|0.22|0.95|0.23|0.11|0.27|0.76|0.66|0.8|0.39|0.46|0.82|0.74|0.01|0.18|0.87|0.36|0.31|0.29|0.19|0.23|0.77|0.66|0.3|0.61|0.55|0.16|0.3|0.95|0.33|0.25|0.14|0.12|0.12|0.03|0.8|0.61|0.49|0.59|0.78|0.85|0.82|0.54|0.68|0.73|0.1|0.87|0.76|0.28|0.78|0.4|0.05|0.31|0.61|0.23|0.78|0.07|0.27|0|0.32|0.15|0.37|0.38|0.27|0.06|0.24|0.85|0.32|0.05|0.67|0.26|0.25|0.71|0.46|0.52|0.53|0.39|0.34|0.04|0.43|0.56|0.2|0.43|0.88|0.03|0.63|0.81|0.91|0.73|0.87|0.63|0.11|0.54|0.1|0.19|0.9|0.94|0.78|0.28|0.05|0.32|0.44|0.19|0.8|0.18|0.3|0.79|0.97|0.03|0.23|0.89|0.57|0.96|0.33|0.32|0.38|0.23|0.4|0.37|0.35|0.49|0.7|0.11|0.93|0.59|0.51|0.33|0.51|0.72|0.28|0.65|0.21|0.9|0.2|0.6|0.17|0.39|0.04|0.33|0.81|0.77|0.32|0.32|0.76|0.7|0.78|0.83|0.03|0.74|0.94|0.74|0.79|0.2|0.51|0.03|0.2|0.26|0.94|0.33|0.96|0.91|0.56|0.82|0.36|0.48|0.67|0.55|0.92|0.09|0.35|0.94|0.84|0.18|0.08|0.88|0.76|0.51|0.72|0.84|0.26|0.55|0.42|0.21|0.38|0.3|0.36|0.6|0.24|0.21|0.4|0.83|0.24|0.63|0.41|0.97|0.05|0.01|0.25|0.15|0.51|0.08|0.17|0.17|0.1|0.8|0.12|0.58|0.93|0.16|0.12|0.26|0.81|0.14|0.94|0.2|0.03|0.61|0.02|0.89|0.27|0.81|0.89|0.3|0.97|0.87|0.48|0.7|0.23|0.42|0.8|0.77|0.91|0.92|0.8|0.12|0.33|0.07|0.24|0.17|0.4|0.69|0.33|0.63|0.52|0.42|0.38|0.34|0.74|0.31|0.6|0.44|0.86|0.12|0.06|0.96|0.71|0.58|0.43|0.61|0.69|0.61|0.19|0.86|0.04|0.35|0.51|0.69|0.28|0.81|0.45|0.75|0.81|0.22|0.03|0.35|0.96|0.08|0.8|0.11|0.07|0.54|0.07|0.99|0.75|0.31|0.59|0.95|0.65|0.54|0.23|0.7|0.43|0.78|0.49|0.34|0.21|0.73|0.8|0.66|0.2|0.39|0.71|0.54|0.07|0.6|0.98|0.78|0.35|0.97|0.62|0.64|0.96|0.14|0.08|0.26|0.61|0.89|0|0.5|0.34|0.09|0.2|0.11|0.75|0.97|0.56|0.37|0.47|0.55|0.09|0.65|0.16|0.85|0.26|0.28|0.69|0.21|0.84|0.5|0.1|0.62|0.79|0.91|0.16|0.86|0.26|0.29|0.66|0.78|0.61|0.76|0.59|0.03|0.23|0.75|0.57|0.89|0.4|0.96|0.62|0.58|0.37|0.79|0.38|0.31|0.38|0.86|0.13|0.13|0.53|0.15|0.89|0.32|0.35|0.94|0.22|0.96|0.96|0.35|0.62|0.99|0.27|0.8|0.41|0.64|0.32|0.31|0.64|0.46|0.08|0.29|0.26|0.28|0.81|0.71|0.85|0.03|0.59|0.35|0.93|0.74|0.3|0.39|0.93|0.61|0.24|0.94|0.43|0.51|0.66|0.22|0.33|0.2|0.65|0.42|0.87|0.66|0.41|0.84|0.31|0.05|0.55|0.04|0.17|0.25|0.93|0.93|0.83|0.7|0.42|0.63|0.71|0.02|0.38|0.58|0.68|0.15|0.45|0.9|0.53|0.07|0.98|0.56|0.41|0.87|0.7|0.37|0.52|0.21|0.05|0.92|0.73|0.83|0.26|0.3|0.81|0.28|0.75|0.66|0.12|0.5|0.99|0.43|0.16|0.23|0.69|0.36|0.39|0.64|0.98|0.46|0.59|0.15|0.32|0.78|0.71|0.8|0.71|0.19|0.06|0.78|0.88|0.82|0.31|0.34|0.57|0.01|0.92|0.43|0.56|0.21|0.46|0.55|0.79|0.2|0.92|0.29|0.46|0|0.85|0.29|0.81|0.23|0.63|0.97|0.86|0.68|0.34|0.87|0.32|0.17|0.47|0.55|0.3|0.21|0.41|0.77|0.43|0.82|0.19|0.73|0.36|0.17|0.75|0.27|0.45|0.94|0.45|0.02|0.91|0.19|0.48|0.86|0.43|0.91|0.27|0.05|0.08|0.17|0.43|0.4|0.18|0.36|0.95|0.78|0.24|0.71|0.44|0.39|0.91|0.4|0.56|0.52|0.3|0.56|0.65|0.44|0.21|0.76|0.22|0.35|0.03|0.61|0.16|0.77|0.58|0.77|0.08|0|0.94|0.51|0.25|0.99|0.48|0.76|0.1|0.65|0.08|0.97|0.5|0.47|0.63|0.84|0.9|0.21|0.96|0.11|0.04|0.99|0.66|0.42|0.26|0.63|0.05|0.28|0.15|0.55|0.2|0.8|0.42|0.61|0.89|0.37|0.73|0.56|0.29|0.46|0.2|0.01|0.2|0.5|0.99|0.51|0.67|0.07|0.19|0.14|0.49|0.3|0.28|0.83|0.45|0.26|0.04|0.85|0.76|0.52|0.65|0.73|0.69|0.82|0.89|0.53|0.77|0.71|0.7|0.19|0.76|0.89|0.83|0.35|0.71|0.67|0.63|0.79|0.63|0.16|0.96|0.3|0.1|0.25|0.18|0.12|0.49|0.74|0.38|0.39|0.68|0.59|0.75|0.14|0.9|0.25|0.04|0.81|0.16|0.15|0.28|0.68|0.02|0.41|0.85|0.76|0.17|0.34|0.22|0.38|0.15|0.85|0.02|0.01|0.02|0.83|0.84|0.15|0.45|0.61|0.26|0.84|0.44|0.57|0.02|0.11|0.53|0.32|0.05|0.53|0.74|0.13|0.59|0.4|0.69|0.35|0.35|0.8|0.82|0.45|0.51|0.81|0.11|0.76|0.07|0.22|0.03|0.88|0.3|0.92|0.62|0.94|0.45|0.02|0.28|0.75|0.09|0.57|0.69|0.01|0.03|0.96|0.34|0.17|0.35|0.02|0.73|0.64|0.52|0.49|0.65|0.12|0|0.64|0.21|0.77|0.46|0.65|0.66|0.58|0.31|0.8|0.38|0.13|0.82|0.63|0.36|0.81|0.87|0.64|0.73|0.1|0.56|0.2|0.86|0.05|0.7|0.93|0.91|0.7|0.78|0.81|0.62|0|0.21|0.84|0.93|0.92|0.56|0.43|0.32|0.21|0.23|0.38|0.72|0.05|0.21|0.07|0.44|0.36|0.1|0.94|0.97|0.63|0.17|0.37|0.35|0.48|0.38|0.66|0.77|0.66|0.07|0.66|0.56|0.33|0.86|0.52|0.8|0.01|0.86|0.12|0.97|0.23|0.69|0.19|0.28|0.22|0.18|0.38|0.74|0.01|0.12|0.41|0.91|0.14|0.78|0.74|0.1|0.17|0.07|0.44|0.14|0.21|0.97|0.78|0.72|0.12|0.05|0.83|0.29|0.96|0.37|0.27|0.06|0.35|0.27|0.03|0.49|0.48|0.78|0.52|0.7|0.9|0.67|0.5|0.73|0.09|0.66|0.9|0.67|0.36|0.74|0.68|0.22|0.63|0.18|0.33|0.48|0.05|0.86|0.12|0.67|0.16|0.5|0.45|0|0.45|0.59|0.15|0.84|0.76|0.18|0.69|0.61|0.16|0.1|0.35|0.78|0.04|0.81|0.8|0.63|0.24|0.77|0.15|0.89|0.87|0.69|0.6|0.05|0.54|0.54|0.11|0.19|0.58|0.42|0.35|0.09|0.63|0.09|0.74|0.38|0.73|0.82|0.32|0|0.72|0.65|0.47|0|0.98|0.35|0.08|0.35|0.25|0.93|0.66|0.38|0.35|0.37|0.36|0.78|0.73|0.05|0.2|0.03|0.46|0.33|0.81|0.78|0.13|0.08|0.66|0.79|0.18|0.48|0.38|0.96|0.45|0.4|0.44|0.44|0.6|0.69|0.17|0.98|0.89|0|0.3|0.04|0.32|0.98|0.22|0.28|0.65|0.24|0.14|0.28|0|0.97|0.98|0.55|0.1|0.56|0.97|0.2|0.01|0.28|0.89|0.98|0.08|0.09|0.12|0.2|0.51|0.26|0.75|0.97|0.23|0.89|0.64|0.62|0.39|0.99|0.1|0.88|0.94|0.04|0.52|0.94|0.43|0.45|0.95|0.89|0.89|0.27|0.07|0.41|0.49|0.7|0.29|0.13|0.2|0.46|0.79|0.51|0.96|0.92|0.26|0.15|0.81|0.93|0.29|0.59|0.97|0.43|0.38|0.47|0.65|0.49|0.97|0.97|0.36|0.27|0.1|0.41|0.21|0.25|0.38|0.29|0.44|0.44|0.11|0.36|0.04|0.93|0.19|0.15|0.09|0.03|0.46|0.96|0.04|0.47|0.79|0.71|0.11|0.91|0.83|0.96|0.04|0.97|0.95|0.04|0.86|0.43|0.91|0.38|0.46|0.05|0.24|0.04|0.99|0.2|0.41|0.49|0.15|0.42|0.77|0|0.98|0.39|0.35|0.07|0.72|0.22|0.91|0.03|0.62|0.44|0.64|0.02|0.31|0.97|0.08|0.94|0.46|0.78|0.46|0.97|0.82|0.42|0.82|0.25|0.12|0.09|0.12|0.88|0.33|0.42|0.51|0.54|0.93|0.54|0.73|0.36|0.07|0.07|0.62|0.99|0.96|0.18|0.61|0.75|0.92|0.41|0.12|0.2|0.36|0.41|0.77|0.42|0.3|0.04|0.49|0.67|0.27|0.1|0.99|0.7|0.5|0.15|0.36|0.42|0.05|0.74|0.26|0.99|0.33|0.58|0.05|0.77|0.55|0.84|0.39|0.76|0.43|0.49|0.08|0.18|0.83|0.85|0.78|0.29|0.78|0.42|0.03|0.35|0.35|0.15|0.23|0.58|0.54|0.57|0.3|0.64|0.49|0.69|0.13|0.95|0.41|0.71|0.59|0.17|0.5|0.77|0.64|0.71|0.61|0.06|0.95|0.95|0.59|0.85|0.11|0.34|0.08|0.52|0.23|0.92|0.57|0.92|0.19|0.75|0.47|0.2|0.14|0.41|0|0.12|0.82|0.7|0.18|0.14|0.41|0.2|0.74|0.3|0.96|0.66|0.95|0|0.06|0.42|0.5|0.49|0.63|0.68|0.42|0.87|0.41|0.71|0.61|0.98|0.09|0.14|0.31|0.37|0.57|0.59|0.67|0.38|0.51|0.71|0.96|0.69|0.44|0.31|0.1|0.59|0.07|0.74|0.96|0.7|0.83|0.19|0.27|0.37|0|0.46|0.21|0.46|0.67|0.93|0.24|0.19|0.87|0.79|0.52|0.04|0.05|0.03|0.92|0.28|0.59|0.43|0.93|0.68|0.82|0.85~0~~0~~0~`",
            "#KnSR`0~1|10|2|1|13|19|35|27|0|0|2|3|0|3|0|1|2|2|0|3|3|3|2|0|1|1|2|1|1|3|2|0|3|2|3|3|3|3|2|0|2|0|1|2|2|0|0|1|3|1|0|1|1|3|0|3|3|0|2|2|2|1|3|2|3|1|0|0|3|2|1|3|1|3|1|1|3|2|0|0|0|1|0|2|0|2|1|1|3|2|3|0|3|1|0|3|2|1|0|2|2|0|1|0|3|0|2|3|0|0|0|3|1|3|0|2|3|0|1|2|2|3|3|1|0|3|3|3|1|0|3|1|2|2|1|0|3|1|2|0|2|0|1|2|1|0|0|0|1|0|1|3|1|3|3|0|2|2|2|0|2|2|0|2|2|0|0|3|0|2|3|1|1|2|3|0|2|0|0|1|2|1|1|1|1|2|0|2|2|0|0|0|2|1|0|1|1|0|1|1|2|0|3|1|3|0|1|3|1|1|2|3|2|1|1|2|3|0|1|0|2|2|0|1|3|2|3|3|2|0|1|3|2|1|3|1|2|2|1|3|1|1|1|0|2|1|2|1|2|2|2|2|2|3|2|3|1|3|3|3|2|2|2|0|0|1|2|3|1|1|3|1|0|2|1|3|0|3|3|0|0|2|3|3|3|2|1|0|2|1|3|3|3|1|3|3|2|3|0|0|3|0|3|3|0|3|0|2|2|3|3|0|2|2|2|2|0|2|2|1|0|3|1|2|3|2|0|2|3|3|2|0|1|1|1|1|2|3|3|0|0|1|1|1|1|3|1|3|0|0|1|0|0|0|0|3|2|0|0|0|0|2|3|3|2|1|2|3|0|0|1|3|1|3|3|1|3|3|2|2|1|3|1|2|3|2|2|0|3|2|2|0|3|0|2|1|0|2|1|0|3|1|1|3|1|0|2|0|3|3|3|0|1|1|0|3|3|0|1|1|0|1|3|1|1|2|3|2|2|2|1|3|1|1|2|3|3|2|3|2|1|1|2|3|0|2|3|2|3|1|1|0|3|1|1|2|0|0|1|1|1|2|0|0|2|2|1|3|2|0|3|2|1|1|2|3|2|3|1|3|0|3|1|0|0|1|0|2|0|1|2|2|1|0|2|2|0|0|1|3|2|3|0|2|0|2|1|3|1|1|1|0|1|0|1|1|2|2|3|0|1|1|0|2|3|1|1|1|2|0|1|2|0|0|1|0|2|2|2|1|0|3|3|0|2|1|3|1|2|0|1|3|3|3|1|1|3|2|1|3|0|0|2|1|0|0|3|2|2|3|0|3|3|3|3|2|1|1|2|0|1|3|2|3|2|2|2|3|1|1|0|1|0|0|3|3|2|2|2|1|2|0|2|3|0|2|2|0|2|0|3|1|3|0|1|1|1|0|0|2|17|39|32|25|1|15|20|23|2|20|0|34|12|35|38|7|5|23|1|16|29|0|5|4|39|19|27|10|30|19|23|8|2|31|0|37|7|2|11|8|12|14|15|37|22|9|30|1|16|11|14|4|21|9|25|35|15|10|20|35|23|29|18|19|24|33|23|36|11|18|12|24|23|15|21|26|37|26|38|39|33|5|24|30|22|11|34|24|20|16|10|31|21|30|38|6|10|13|8|28|17|26|39|18|30|25|34|13|5|25|24|36|27|18|29|29|24|23|33|8|10|5|32|4|8|20|12|22|13|19|34|3|33|7|10|23|19|16|34|33|9|32|16|6|28|8|10|30|11|20|20|8|22|35|15|10|0|36|8|18|14|32|28|10|1|19|2|17|5|32|35|12|6|11|32|2|5|13|19|35|3|2|1|2|2|2|0|1|2|3|1|10|17|3|2|28|7|32|25|24|21|16|18|23|15|16|18|24|18|23|9|8|23|36|6|31|18|28|9|11|38|19|24|35|30|32|16|33|14|9|38|5|11|21|23|39|27|31|38|17|22|38|6|3|31|6|2|34|34|15|37|24|35|31|24|0|20|19|38|2|8|10|21|24|3|14|33|9|5|16|36|17|35|7|16|31|5|14|23|18|9|29|3|21|25|3|8|7|30|33|19|34|17|34|3|12|24|30|17|0|17|34|15|28|34|16|20|7|23|28|29|29|33|16|5|13|9|3|7|39|34|12|8|18|17|12|3|17|32|7|18|4|19|15|7|39|20|3|26|12|0|17|7|4|18|38|24|22|7|3|37|30|26|29|10|12|34|0|35|35|9|17|14|7|12|11|33|10|13|34|15|10|12|27|7|37|19|22|27|5|4|9|34|36|12|31|26|12|37|20|12|7|22|11|30|22|31|9|7|36|15|36|36|4|6|36|38|32|15|30|1|12|30|7|28|1|34|20|35|37|20|4|3|37|1|29|9|28|25|5|34|23|29|23|3|29|29|39|39|5|16|25|36|12|9|35|16|3|22|19|21|25|21|2|5|1|5|29|12|2|32|23|9|14|22|28|5|35|32|22|17|26|34|31|30|15|15|3|7|15|24|32|16|15|16|24|11|4|27|32|1|16|31|19|22|31|11|11|10|11|28|13|35|24|26|9|26|29|4|18|13|16|20|8|28|6|23|8|22|9|30|14|27|16|18|28|20|27|28|31|30|10|33|27|3|1|19|25|0|19|39|5|31|24|23|6|17|13|13|36|33|1|9|18|8|33|29|23|11|10|3|4|25|0|4|15|0|30|32|5|8|3|0|3|0|2|1|2|2|0|3|0|0|0|0|2|2|1|0|1|3|3|1|2|0|3|0|3|0|0|1|3|2|15|39|0|3|12|20|3|31|27|22|32|33|34|4|23|29|12|0|11|17|22|10|6|3|24|6|27|22|26|2|16|38|18|12|30|39|1|11|34|21|35|18|10|10|29|16|15|17|2|18|32|11|24|24|6|10|25|23|15|0|36|10|5|35|19|31|15|13|20|10|39|7|18|27|21|7|10|13|30|8|29|34|17|6|35|19|24|5|2|37|22|28|6|12|0|14|20|16|18|3|11|9|8|34|39|7|26|38|12|9|3|12|6|2|9|3|36|27|15|3|0|27|0|38|21|17|35|39|39|10|4|38|0|11|6|37|31|17|17|32|4|27|28|2|27|13|16|34|18|30|23|14|10|11|16|17|17|5|3|39|7|13|9|15|17|11|8|24|26|23|36|24|37|31|3|26|38|16|27|24|14|5|23|21|19|10|23|19|35|7|30|13|36|28|38|8|21|25|28|27|34|3|28|30|15|3|18|21|4|29|11|25|11|5|28|18|15|24|23|15|8|35|4|20|27|18|34|3|4|16|6|4|19|31|25|28|11|27|37|0|29|9|16|8|26|9|37|2|25|23|8|37|31|4|36|21|8|10|25|36|9|19|29|17|32|25|10|22|33|19|21|9|34|0|20|25|17|7|18|39|13|26|30|17|16|18|28|22|28|8|31|16|33|1|0|12|28|35|25|12|21|3|29|23|37|9|37|28|29|14|39|1|22|18|21|19|32|23|1|2|17|30|31|16|7|9|22|32|22|4|39|10|4|6|3|17|21|35|35|15|11|37|19|29|27|26|33|35|6|8|34|9|14|1|16|7|7|7|28|17|34|23|10|0|2~0~~0~~0~True|False~0~~0~0.03|0.51|0.69|0.38|0|0.12|0.45|0.61|0.38|0.72|0.76|0.23|0.24|0.15|0.28|0.11|0.76|0.66|0.32|0.9|0.91|0.29|0.53|0.99|0.53|0.52|0.33|0.87|0.93|0.11|0.24|0.81|0.32|0.28|0.71|0.92|0.34|0.52|0.48|0.07|0.49|0.61|0.19|0.21|0.8|0.66|0.58|0.25|0.67|0.52|0.64|0.52|0.2|0.89|0|0.99|0.99|0.22|0.52|0.14|0.92|0.46|0.42|0.14|0.22|0.02|0.55|0.98|0.05|0.12|0.02|0.53|0.21|0.97|0.29|0.53|0.06|0.06|0.74|0.66|0.36|0.72|0.59|0.7|0.23|0.78|0.5|0.79|0.12|0.58|0.07|0.95|0.55|0.05|0.74|0.37|0.3|0.09|0.08|0.52|0.61|0.44|0.66|0.51|0.63|0.07|0.32|0.7|0.49|0.05|0.09|0.99|0.43|0.48|0.85|0.98|0.69|0.2|0.12|0.04|0.11|0.96|0.41|0.73|0.21|0.83|0.13|0.5|0.44|0.52|0.19|0.22|0.24|0.23|0.36|0.9|0.73|0.3|0.69|0.01|0.21|0.11|0.68|0.37|0.66|0.16|0.18|0.86|0.68|0.05|0.8|0.59|0.34|0.27|0.26|0.93|0.34|0.82|0.1|0.93|0.57|0.09|0.39|0.72|0.47|0.49|0.47|0.39|0.05|0.7|0.81|0.36|0.38|0.03|0.17|0.89|0.2|0.49|0.24|0.01|0.46|0.18|0|0.08|0.69|0.51|0.35|0.95|0.52|0.69|0.46|0.77|0.09|0.96|0.2|0.22|0.16|0.98|0.74|0.91|0.2|0.7|0.82|0.34|0.45|0.3|0.05|0.23|0.45|0.59|0.83|0.48|0.07|0.47|0.57|0.06|0.25|0.81|0.9|0.68|0.67|0.66|0.4|0.43|0.92|0.8|0.54|0.32|0.32|0.93|0.49|0.29|0.99|0.68|0.99|0.07|0.89|0.18|0.64|0.29|0|0.68|0.87|0.06|0.83|0.06|0.79|0.89|0.3|0.75|0.54|0.65|0.62|0.97|0.19|0.42|0.58|0.08|0.31|0.91|0.75|0.22|0.69|0.57|0.32|0.32|0.07|0.33|0.84|0.03|0.55|0.71|0.86|0.05|0.03|0.48|0.72|0.55|0.26|0.43|0.5|0.21|0.06|0.38|0.5|0.04|0.72|0.61|0.54|0.21|0.57|0.77|0.26|0.47|0.37|0.16|0.13|0.72|0.54|0.08|0.34|0.04|0.2|0.62|0.78|0.36|0.87|0.09|0.48|0.08|0.06|0.33|0.7|0.35|0.04|0.31|0.48|0.26|0.76|0.72|0.29|0.12|0.65|0.79|0.35|0.86|0.65|0.4|0.23|0.24|0.26|0.97|0.82|0.48|0.06|0.73|0.16|0.39|0.57|0.08|0.21|0.32|0.65|0.55|0.83|0.34|0.78|0.62|0.16|0.95|0.38|0.01|0.84|0.07|0.55|0.66|0.71|0.78|0.46|0.48|0.59|0.97|0.82|0.16|0.03|0.22|0.98|0.02|0.34|0.6|0.28|0.26|0.33|0.05|0.39|0.83|0.67|0.43|0.72|0.04|0.88|0.26|0.38|0.34|0.5|0.3|0.11|0.12|0.41|0.93|0.47|0.26|0.59|0.66|0.77|0.18|0.24|0.92|0.09|0.65|0.92|0.96|0.14|0.1|0.38|0.76|0.35|0.93|0.16|0.77|0.35|0.22|0.17|0.62|0.85|0.75|0.89|0.43|0.99|0.09|0.23|0.23|0.97|0.32|0.88|0.21|0.96|0.22|0.27|0.64|0.54|0.95|0.64|0.9|0.88|0.87|0.39|0.14|0.29|0.09|0.13|0.98|0.84|0.46|0.14|0.59|0.37|0.99|0.39|0.65|0.42|0.04|0.35|0.78|0.99|0.12|0.39|0.39|0.21|0.62|0.83|0.42|0.26|0.79|0.44|0.24|0.47|0.43|0.96|0.13|0.76|0.36|0.41|0.95|0.43|0.67|0.79|0.6|0.42|0.8|0.63|0.44|0.53|0.82|0.9|0.79|0.65|0.21|0.58|0.09|0.12|0.87|0.3|0.06|0.55|0.26|0.6|0.64|0.2|0.03|0.95|0.61|0.29|0.54|0.05|0.11|0.38|0.58|0.97|0.58|0.68|0.53|0.24|0.75|0.73|0.79|0.87|0.14|0.61|0.86|0.39|0.31|0.99|0.37|0.54|0.44|0.71|0.96|0.36|0.11|0.33|0.58|0.99|0.09|0.4|0.54|0.6|0.77|0.38|0.45|0.54|0.48|0.05|0.8|0.45|0.37|0.66|0.34|0.95|0.79|0.65|0.05|0.58|0.94|0.63|0.74|0.69|0.72|0.17|0.7|0.64|0.18|0.39|0.04|0.59|0.52|0.19|0.52|0.03|0.25|0.29|0.38|0.55|0.79|0.33|0.26|0.63|0.29|0.96|0.2|0.45|0.01|0.91|0.87|0.71|0.97|0.26|0.25|0.6|0.06|0.33|0.54|0.46|0.3|0.38|0.66|0.1|0.11|0.01|0.12|0.93|0.91|0.86|0.11|0.55|0.03|0.44|0.29|0.75|0.4|0.97|0.83|0.52|0.93|0.17|0.73|0.75|0.35|0.03|0.32|0.69|0.28|0.01|0.91|0.86|0.43|0.49|0.16|0|0.83|0.74|0.92|0.43|0.83|0.98|0.88|0.27|0.65|0.4|0.3|0.37|0.56|0.21|0.88|0.43|0.52|0.11|0.71|0.07|0.89|0.06|0.13|0.75|0.31|0.88|0.29|0.08|0.01|0.12|0.66|0.78|0.46|0.9|0.22|0.95|0.98|0.25|0.61|0.16|0.63|0.65|0.79|0.77|0.85|0.55|0.27|0.9|0.76|0.64|0.92|0.86|0.31|0.4|0.5|0.29|0.69|0.68|0.84|0.24|0.31|0.81|0.63|0.35|0.76|0.63|0.76|0.57|0.93|0.39|0.63|0.52|0.26|0.37|0.06|0.76|0.53|0.46|0.59|0.7|0.24|0.13|0.15|0.32|0.24|0.94|0.41|0.07|0.75|0.44|0.15|0.56|0.18|0.84|0.85|0.66|0.62|0.31|0.59|0.35|0.6|0.81|0.27|0.51|0.73|0.88|0.85|0.42|0.03|0.92|0.76|0|0.72|0.97|0.21|0.4|0.01|0.07|0.59|0.07|0.23|0.19|0.57|0.45|0.32|0.4|0.17|0.41|0.33|0.74|0.35|0.58|0.59|0.98|0.89|0.43|0.29|0.46|0.12|0.85|0.45|0.8|0.1|0.81|0.49|0.66|0.72|0.57|0.72|0.21|0.34|0.68|0.85|0.12|0.31|0.71|0.71|0.55|0.52|0.89|0.01|0.71|0.13|0.42|0.28|0.41|0.32|0.15|0.34|0.62|0.06|0.19|0.04|0.19|0.44|0.66|0.47|0.05|0.73|0.71|0.42|0.7|0.69|0.66|0.93|0.34|0.64|0.8|0.36|0.52|0.97|0.18|0.8|0.04|0.3|0.89|0.26|0.96|0.03|0.21|0.89|0.04|0.44|0.58|0.64|0.36|0.87|0.82|0.38|0.72|0.18|0.6|0.93|0.88|0.72|0.35|0.9|0.51|0.53|0.56|0.49|0.73|0.52|0.72|0.12|0.39|0.47|0.09|0.76|0.42|0.05|0.14|0.99|0.16|0.55|0.35|0.75|0.25|0.93|0.06|0.95|0.32|0.63|0.36|0.88|0.09|0.05|0.6|0.66|0.33|0.24|0.56|0.78|0.02|0.56|0.75|0.97|0.6|0.97|0.53|0.21|0.22|0.42|0.36|0.68|0.51|0.38|0.03|0.04|0.18|0.37|0.8|0.19|0.09|0.69|0.82|0.25|0.87|0.91|0.19|0.84|0.13|0.17|0.42|0.28|0.63|0.72|0.27|0.52|0.54|0.67|0.41|0.41|0.94|0.57|0.32|0.34|0.56|0.45|0.85|0.64|0.21|0.86|0.77|0.85|0.41|0.67|0.01|0.97|0.06|0.57|0.86|0.34|0.29|0.05|0.74|0.87|0.86|0.24|0.12|0.51|0.04|0.29|0.15|0.83|0.58|0.26|0.13|0.6|0.77|0.67|0.87|0.53|0.18|0.55|0.12|0.03|0.43|0.83|0.08|0.6|0.6|0.91|0.93|0.06|0.93|0.66|0.46|0.53|0.73|0.43|0.79|0.93|0.82|0.93|0.76|0.61|0.2|0.95|0.51|0.25|0.44|0.93|0.71|0.12|0.18|0.99|0.58|0.64|0.05|0.63|0.84|0.29|0.18|0.78|0.92|0.06|0.53|0.39|0.06|0.27|0.39|0.83|0.94|0.31|0.11|0.72|0.58|0.54|0.74|0.59|0.08|0.22|0.01|0.87|0.76|0.95|0.33|0.05|0.73|0.87|0.82|0.83|0.25|0.06|0.2|0.63|0|0.5|0.86|0.4|0.15|0.16|0.82|0.53|0.31|0.12|0.15|0.05|0.91|0.27|0.59|0.54|0.77|0.23|0.32|0.63|0.46|0.82|0.17|0.62|0.49|0.64|0.71|0.03|0.06|0.95|0.18|0.14|0.01|0.02|0.65|0.23|0.88|0.58|0.39|0.46|0.56|0.98|0.11|0.48|0.16|0.22|0.58|0.36|0.28|0.52|0.15|0.42|0.48|0.47|0.61|0.73|0.06|0.37|0.66|0.24|0.53|0.47|0.78|0.63|0.46|0.94|0.95|0.33|0.99|0.95|0.21~0~~0~~0~`"
        };
        #endregion

        public DungeonMazeMapTests(ITestOutputHelper output) => _output = output;

        /// <summary>
        /// Tests that all doors that are made in rooms are in the door structure, with known sequences that cause
        /// issues if area merges are incorrectly recorded/points are incorrectly selected.
        /// </summary>
        [Theory]
        [MemberDataEnumerable(nameof(TrueClosestEdgeCaseGenerators))]
        public void TunnelsConnectedToTrueClosest(string generatorSerialized)
        {
            // Use a generator with the seed known to cause an issue in a minimalistic case
            var rng = new KnownSeriesRandom();
            rng.StringDeserialize(generatorSerialized);

            // Generate a map
            var generator = new Generator(40, 40);
            generator
                .ConfigAndGenerateSafe((gen) =>
                {
                    gen.AddSteps(GoRogue.MapGeneration.DefaultAlgorithms.DungeonMazeMapSteps(
                        minRooms: 1, maxRooms: 1, roomMinSize: 5, roomMaxSize: 11, saveDeadEndChance: 0, rng: rng));
                });

            // Find components we're expecting
            var rooms = generator.Context.GetFirst<ItemList<Rectangle>>("Rooms");
            var wallFloor = generator.Context.GetFirst<IGridView<bool>>("WallFloor");
            var doors = generator.Context.GetFirst<DoorList>("Doors");

            // Print map representation to assist in debugging if test fails
            _output.WriteLine("Map: ");
            _output.WriteLine(wallFloor.ExtendToString(elementStringifier: i => i ? "." : "#"));

            // Go through each room and verify the correct items are there.
            foreach (var (room, _) in rooms)
            {
                _output.WriteLine($"Performing check on room: {room}");
                // Find all doors with a naive algorithm
                var holes = new HashSet<Point>();
                foreach (var edgePoint in room.Expand(1, 1).PerimeterPositions())
                    if (wallFloor[edgePoint])
                        holes.Add(edgePoint);

                // Find list of rooms in door list for the room we're working with, and make sure it contains the same
                // doors as are actually there.
                var doorListForCurrentRoom = doors.DoorsPerRoom[room];
                Assert.Equal(holes, new HashSet<Point>(doorListForCurrentRoom.Doors));
                Assert.Equal(holes, doorListForCurrentRoom.Select(pair => pair.Item).ToHashSet());
            }
        }

        /// <summary>
        /// Checks using an array of random seeds to ensure that DungeonMazeMap generation does not produce unexpected
        /// doors.
        /// </summary>
        [Fact]
        public void AllDoorsRecorded()
        {
            for (int i = 0; i < 500; i++)
            {
                // Use a particular generator so that we know the seed and thus have a replicable procedure if there
                // is an issue
                var rng = new MizuchiRandom();
                _output.WriteLine($"Using generator with states: {rng.StateA}, {rng.StateB}");

                // Generate a map
                var generator = new Generator(40, 40);
                generator
                    .ConfigAndGenerateSafe(gen =>
                    {
                        gen.AddSteps(GoRogue.MapGeneration.DefaultAlgorithms.DungeonMazeMapSteps(
                            minRooms: 1, maxRooms: 1, roomMinSize: 5, roomMaxSize: 11, saveDeadEndChance: 0, rng: rng));
                    });

                // Find components we're expecting
                var rooms = generator.Context.GetFirst<ItemList<Rectangle>>("Rooms");
                var wallFloor = generator.Context.GetFirst<IGridView<bool>>("WallFloor");
                var doors = generator.Context.GetFirst<DoorList>("Doors");

                // Go through each room and verify the correct items are there.
                foreach (var (room, _) in rooms)
                {
                    // Find all doors with a naive algorithm
                    var holes = new HashSet<Point>();
                    foreach (var edgePoint in room.Expand(1, 1).PerimeterPositions())
                        if (wallFloor[edgePoint])
                            holes.Add(edgePoint);

                    // Find list of rooms in door list for the room we're working with, and make sure it contains the same
                    // doors as are actually there.
                    var doorListForCurrentRoom = doors.DoorsPerRoom[room];
                    Assert.Equal(holes, new HashSet<Point>(doorListForCurrentRoom.Doors));
                    Assert.Equal(holes, doorListForCurrentRoom.Select(pair => pair.Item).ToHashSet());
                }
            }
        }
    }
}
