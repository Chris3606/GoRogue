using System.Collections.Generic;
using System.Linq;
using GoRogue.MapGeneration;
using GoRogue.MapGeneration.ContextComponents;
using SadRogue.Primitives;
using SadRogue.Primitives.GridViews;
using ShaiRandom.Generators;
using Xunit;
using Xunit.Abstractions;
using XUnit.ValueTuples;

namespace GoRogue.UnitTests.MapGeneration.DefaultAlgorithms
{
    public class DungeonMazeMapTests
    {
        private readonly ITestOutputHelper _output;

        #region Test Data


        // Seeds known to cause corner cases that, if connection algorithm doesn't choose true closest points,
        // will result in tunnels cutting through rooms (thus creating additional "doors")
        public static string[] TrueClosestEdgeCaseGenerators =
        {
            "#KnSR`0~1|7|-1|1|19|3|31|33|3|2|3|2|1|2|1|0|1|3|1|1|0|0|2|2|0|2|1|3|1|0|1|0|0|2|2|1|2|3|3|0|1|1|0|2|1|1|3|0|0|1|2|1|0|2|0|3|1|2|1|2|1|3|1|0|1|3|0|1|1|1|0|0|1|0|1|1|1|3|1|1|2|2|1|3|0|3|3|1|2|1|3|3|3|2|2|3|0|3|3|1|1|3|3|2|2|1|1|0|3|3|2|0|2|3|0|2|3|3|0|2|3|0|0|0|0|3|2|1|1|1|0|3|3|3|0|1|3|2|3|3|1|0|0|2|1|1|3|3|2|0|2|2|0|1|2|3|1|0|1|3|2|2|3|3|3|3|3|3|3|0|2|0|1|3|2|2|2|2|2|2|0|1|0|2|2|2|1|0|3|2|1|0|3|2|3|0|0|0|1|1|0|1|2|3|2|1|1|2|0|1|0|0|0|1|2|3|3|3|2|2|1|3|3|2|3|2|3|1|1|3|3|3|2|0|1|2|2|1|1|0|3|2|2|2|2|1|0|1|3|3|2|0|2|0|3|3|2|2|1|1|2|0|2|2|3|0|1|3|2|0|1|1|0|3|1|1|2|3|1|0|3|3|2|2|3|1|0|2|0|2|1|0|0|2|2|2|1|3|1|0|0|3|1|0|0|1|3|1|1|2|3|0|2|0|3|2|3|0|1|0|2|3|2|3|2|2|1|1|0|3|1|1|2|3|3|1|0|2|3|2|2|3|0|0|1|1|0|3|3|2|0|1|2|0|3|2|2|0|0|3|2|0|3|3|2|2|3|2|1|1|3|3|1|2|0|2|2|0|3|2|2|2|1|0|0|1|1|2|2|3|3|2|0|2|1|3|2|1|3|0|1|2|3|0|2|2|0|1|3|0|1|2|2|0|2|3|1|0|2|0|2|1|1|1|1|1|1|3|2|3|1|0|0|0|2|0|0|0|2|2|0|3|2|1|1|0|3|0|3|2|0|2|3|0|0|1|2|3|3|3|3|1|1|3|1|2|0|1|0|2|1|1|0|3|3|1|3|3|0|3|2|1|2|3|2|0|2|0|3|1|0|2|0|2|1|0|1|2|1|3|3|1|0|2|0|2|2|3|3|1|3|1|1|1|3|1|3|2|1|1|0|2|1|0|1|2|2|3|3|3|2|3|3|1|0|1|1|2|0|3|2|0|2|1|3|2|3|0|2|3|2|0|1|3|2|1|2|3|2|0|3|1|1|2|2|3|1|2|0|2|2|0|1|0|0|2|0|3|0|3|1|3|0|1|2|3|0|3|0|3|2|2|2|2|3|2|0|3|2|1|1|2|2|0|0|3|0|3|3|2|2|0|2|1|2|2|1|2|3|0|3|1|3|3|2|3|3|2|3|0|1|3|1|1|3|1|0|1|0|1|2|2|2|1|1|2|0|2|0|1|3|3|2|1|2|2|3|3|3|0|0|3|3|3|0|2|2|3|0|3|2|0|3|2|0|0|3|2|1|0|2|0|3|3|1|0|2|0|2|0|1|0|2|0|2|3|3|0|3|1|1|0|2|0|0|3|2|0|1|1|3|3|3|2|2|3|0|2|3|0|1|1|3|3|0|1|0|1|3|1|1|0|2|2|2|3|0|2|2|0|2|2|3|2|3|2|2|3|1|4|14|36|7|30|1|36|5|26|37|10|20|38|0|16|38|15|20|36|14|36|14|24|18|31|34|33|10|18|31|6|0|20|22|25|20|29|28|6|1|22|36|10|18|26|30|14|32|31|11|30|24|36|20|20|10|10|13|29|29|23|32|13|38|20|0|36|1|15|4|7|34|35|17|0|39|37|25|35|0|12|27|33|10|24|27|5|5|3|36|37|20|33|39|16|12|12|29|2|23|11|30|5|25|19|24|17|14|32|26|32|28|4|38|19|10|12|25|28|16|29|39|9|18|28|24|24|16|10|10|22|2|3|7|16|8|16|10|36|10|9|32|11|16|28|31|25|10|16|31|7|4|4|17|21|29|7|33|4|14|35|37|22|20|15|30|23|20|0|30|26|20|25|16|32|28|25|12|38|16|4|11|37|18|36|36|1|2|34|12|37|23|21|3|21|18|10|14|27|35|1|14|6|26|9|38|1|16|14|24|5|16|25|2|1|20|33|2|13|5|4|36|35|2|3|35|19|28|21|13|28|32|28|16|0|18|22|36|23|25|3|35|1|11|2|17|37|1|18|31|34|1|5|32|8|6|1|38|33|31|26|37|27|19|5|28|22|29|31|5|30|33|31|32|0|29|16|1|36|13|20|27|26|27|15|33|3|36|32|32|1|6|36|33|0|17|37|11|33|35|30|3|2|29|12|5|3|9|9|11|10|7|12|3|5|37|31|29|32|28|33|26|37|35|30|2|0|31|2|24|27|0|24|25|12|6|30|18|30|11|10|7|0|36|5|37|39|3|32|0|19|39|14|14|17|17|23|0|24|37|15|34|33|36|1|6|1|31|13|22|22|0|30|7|4|0|39|35|30|7|1|39|37|9|8|35|2~0~~0~~0~~0~~0~0.51|0.87|0.88|0.76|0.08|0.19|0.05|0.29|0.04|0.33|0.07|0.82|0.85|0.63|0.99|0.55|0.94|0.68|0.08|0.39|0.91|0.35|0.62|0.66|0.43|0.53|0.75|0.22|0.93|0.1|0.66|0.56|0.56|0.92|0.86|0.3|0.81|0.74|0.25|0.79|0.07|0.47|0.77|0.79|0.52|0.68|0.31|0.55|0.9|0.55|0.38|0.45|0.65|0.07|0.35|0.43|0.55|0.92|0.75|0.18|0.9|1|0.1|0.89|0.2|0.68|0.79|0.62|0.29|0.44|0.4|0.76|0.62|0.92|0.19|0.06|0.61|0.87|0.13|0.17|0.78|0.28|0.18|0.73|0.23|0.58|0.31|0.36|0.27|0.01|0.55|0.18|0.21|0.89|0.26|0.7|0.18|0.76|0.08|0.86|0.78|0.31|0.98|0.38|0.32|0.72|0.83|0.86|0.42|0.27|0.32|0.42|0.25|0.55|0.66|0.36|0.23|0.01|0.41|0.42|0.06|0.15|0.03|0.5|0.93|0.88|0.96|0.16|0.66|0.27|0.45|0.07|0.8|0.38|0.48|0.85|0.55|0.88|0.5|0.4|0.05|0.17|0.35|0.32|0.17|0.35|0.4|0.19|0.77|0.19|0.73|0.59|0.21|0.34|0.23|0.66|0.49|0.46|0.64|0.42|0.45|0.65|0.51|0.58|0.78|0.57|0.2|0.95|0.51|0.02|0.32|0.9|0.9|0.11|0.25|0.75|0.04|0.3|0.61|0.68|0.03|0.07|0.94|0.77|0.82|0.15|0.31|0.43|0.75|0.23|0.73|0.19|0.28|0.54|0.91|0.98|0.57|0.38|0.07|0.43|0.65|1|0.84|0.4|0.42|1|0.59|0.39|0.95|0.18|0.15|0.16|0.26|1|0.38|0.5|0.79|0.99|0.84|0.61|0.6|0.18|0.08|0.65|0.94|0.49|0.14|0.34|0.52|0.34|0.48|0.77|0.73|0.72|0.66|0.91|0.48|0.25|0.47|0.89|0.12|0.99|0.23|0.82|0.44|0.62|0.21|0.78|0.4|0.33|0.21|1|0.91|0.23|0.73|0.65|0.96|0.79|0.42|0.5|0.41|0.03|0.29|0.21|0.76|0.72|0.29|0.73|0.1|0.97|0.86|0.71|0.86|0.29|0.81|1|0.66|0.58|0.01|0.33|0.59|0.72|0.61|0.02|0.17|0.89|0.95|0.31|0.11|0.54|0.67|0.83|0.97|0.61|0.45|0.91|0.82|0.52|0.35|0.14|0.52|0.68|0.89|0.86|0.49|0.67|0.78|0.59|0.22|0.39|0.79|0.36|0.3|0.91|0.39|0.18|0.69|0.38|0.88|0.07|0.78|0.84|0.66|0.38|0.09|0.26|0.71|0.89|0.64|0.93|0.51|0.58|0.82|0.41|0.69|0.11|0.07|0.03|0.34|0.97|0.53|0.91|0.22|0.37|0.1|0.86|0.12|0.61|0.76|0.49|0.38|0.55|0.11|0.45|0.3|0.61|0.91|0.49|0.76|0.03|0.01|0.14|0.41|0.14|0.93|0.04|0.61|0.59|0.73|0.05|0.98|0.24|0.25|0.12|0.09|0.59|0.51|0.92|0.98|0.58|0.39|0.39|0.92|0.48|0.46|0.24|0.38|0.06|0.15|0.24|0.23|0.99|0.42|0.2|0.18|0.39|0.91|0.5|0.88|0.54|0.14|0.63|0.85|0.36|0.72|0.9|0.75|0.72|0.27|0.63|0.97|0.4|0.28|0.68|1|0.21|0.62|0.52|0.91|0.23|0.97|0.54|0.71|0.7|0.41|0.11|0.71|0.38|0.03|0.24|0.4|0.03|0.1|0.97|0.48|0.33|0.59|0.2|0.25|0.89|0.5|0.61|0.7|0.93|0.45|0.38|0.34|0.74|0.98|0.32|0.62|0.13|0.24|0.37|0.89|0.82|0.33|0.88|0.54|0.05|0.75|0.1|0.27|0.67|0.95|0.8|0.14|0.74|0.17|0.57|0.52|0.54|0.37|0.34|0.36|0.98|0.68|0.48|0.94|0.4|0.25|0.28|0.88|0.48|0.22|0.59|0.59|0.58|0.8|0.01|0.94|0.1|0.57|0.39|0.78|0.08|0.27|0.1|0.53|0.86|0.42|0.61|0.47|0.84|0.45|0.98|0.31|1|0.34|0.72|0.15|0.67|0.33|0.6|0.38|0.22|0.19|0.85|0.85|0.35|0.58|0.35|0.85|0.04|0.29|0.1|0.08|0.08|0.15|0.12|0.71|0.78|0.2|0.35|0.18|0.91|0.81|0.19|0.29|0.48|0.34|0.06|0.92|0.63|0.31|0.28|0.64|0.21|0.35|0.49|0.59|0.86|0.38|0.47|0.34|0.32|0.19|0.74|0.63|0.07|0.85|0.75|0.8|0.74|0.67|0.25|0.67|0.32|0.82|0.26|0.87|0.29|0.87|0.77|0.39|0.3|0.81|0.86|0.45|0.45|0.39|0.93|0.99|0.94|0.79|0.11|0.31|0.45|0.53|0.38|0.74|0.41|0.53|0.41|0.22|0.88|0.35|0.47|0.29|0.23|0.63|0.46|0.87|0.88|0.02|0.73|0.75|0.14|0.35|0.86|0.98|0.03|0.38|0.02|0.49|0.09|0.52|0.38|0.35|0.88|0.67|0.3|0.14|0.33|0.57|0.97|0.45|0.28|0.06|0.16|0.1|0.85|0.09|0.37|0.83|0.27|0.01|0.69|0.18|0.17|0.09|0.17|0.53|0.75|0.73|0.99|0.08|0.29|0.01|0.26|0.79|0.7|0.44|0.12|0.24|0.58|0.32|0.68|0.38|0.09|0.99|0.45|0.51|0.01|0.07|0.08|0.95|0.03|0.05|0.46|0.73|0.08|0.12|0.15|0.26|0.45|0.37|0.36|0.75|0.5|0.55|0.63|0.61|0.38|0.53|0.19|0.89|0.13|0.67|0.08|0.25|0.63|0.65|0.69|0.29|0.81|0.05|0.25|0.96|0.74|0.11|0.98|0.23|0.64|0.81|0.61|0.58|0.31|0.3|0.15|0.23|0.02|0.38|0.61|0.38|0.53|0.62|0.96|0.55|0.5|0.11|0.73|0.6|0.09|0.52|0.97|0.34|0.94|0.33|0.3|0.4|0.02|0.32|0.72|0.47|0.82|0.3|0.52|0.52|0.43|0.8|0.84|0.26|0.07|0.17|0.39|0.1|0.07|0.32|0.5|0.13|0.32|0.28|0.53|0.6|0.21|0.74|0.33|0.77|0.47|0.13|0.15|0.39|0.8|0.54|0.76|0.85|0.98|0.91|0.35|0.94|0.71|0.87|0.62|0.4|0.89|0.55|0.94|0.74|0.46|0.24|0.06|0.22|0.3|0.84|0.87|0.83|0.87|0.56|0.84|0.6|0.96|0.24|0.74|0.39|0.74|0.19|0.87|0.41|0.73|0.48|0.82|0.15|0.88|0.07|0.07|0.24|0.94|0.98|0.65|0.16|0.79|0.92|0.67|0.69|0.27|0.38|0.93|0.99|0.79|0.21|0.29|0.1|0.76|0.62|0.15|0.85|0.61|0.61|0.01|0.67|0.81|0.54|0.08|0.31|0.42|0.35|0.16|0.01|0.94|0.49|0.66|0.14|0.84|0.91|0.85|0.13|0.74|0.78|0.13|0.47|0.03|0.54|0.97|0.79|0.21|0.3|0.56|0.83|0.37|0.81|0.75|0.69|0.76|0.47|0.67|0.65|0.01|0.46|0.42|0.07|0.47|0.16|0.63|0.77|0.95|0.19|0.46|0.68|0.02|0.09|0.49|0.51|0.38|0.98|0.73|0.3|0.73|0.83|0.49|0.8|0.7|0.01|0.27|0.81|0.7|0.13|0.22|0.84|0.51|0.45|0.23|0.05|0.02|0.8|0.58|0.71|0.97|0.01|0.3|0.69|0.25|1|0.27|0.71|0.35|0.9|0.4|0.27|0.3|0.78|0.56|0.5|0.84|0.71|0.6|0.75|0.05|0.22|0.34|0.08|0.75|0.36|0.99|0.82|0.34|0.43|0.27|0.65|0.15|0.84|0.72|0.4|0.57|0.92|0.28|0.94|0.46|0.49|0.18|0.42|0.25|0.88|0.3|0.7|0.54|0.87|0.86|0.31|0.41|0.31|0.65|0.37|0.64|0.64|0.38|0.76|0.84|0.61|0.66|0.32|0.16|0.06|0.55|0.47|0.19|0.04|0.81|1|0.75|0.4|0.53|0.59|0.12|0.34|0.66|0.06|0.48|0.21|0.33|0.97|0.46|0.52|0.03|0.8|0.68|0.97|0.38|0.58|0.05|0.48|0.86|0.66|0.61|0.12|0.39|0.78|0.63|0.52|0.44|0.76|0.25|0.49|0.11|0.95|0.6|0.17|0.47|0.15|0.09|0.77|0.12|0.27|0.62|0.57|0.1|0.89|0.41|0.22|0.39|0.6|0.41|0.04|0.93|0.44|0.4|0.45|0.03|0.71|0.82|0.64|0.45|0.67|0.97|0.05|0.5|0.35|0.5|0.93|0.36|0.31|0.17|0.11|0.94|0.29|0.51|0.21|0.65|0.96|0.12|0.23|0.86|0.13|0.08|0.99|0.2|0.52|0.15|0.59|0.33|0.41|0.27|0.08|0.95|0.52|0.07|0.26|0.9|0.31|0.29|0.98|0.95|0.83|0.74|0.99|0.72|0.57|0.34|0.81|0.31|0.13|0.6|0.99|0.42|0.59|0.79|0.96|0.93|0.69|0.54|0.17|0.66|0.98|0.19|0.46|0.86|0.14|0.37|0.14|0.43|0.17|0.18|0.14|0.23|0.54|0.91|0.69|0.6|0.23|0.92|0.03|0.13|0.98|0.04|0.28|0.46|0.44|0.22|0.21|0.1|0.55|0.91|0.25|0.35|0.65|0.31|0.09|0.74|0.27|0.99|0.95|0.41|0.57|0.15|0.81|0.65|0.25|0.24|0.19|0.99|0.82|0.55|0.09|0.04|0.96|0.29|0.65|0.49|0.37|0.31|0.66|0.33|0.58|0.47|0.68|0.21|0.76|0.31|0.07|0.98|0.28|0.19|0.94|0.11|0.82|0.9|0.91|0.66|0.72|0.53|0.19|0.66|0.59|0.73|0.67|0.73|0.6|0.19|0.62|0.47|0.24|0.33|0.01|0.3|0.75|0.3|0.45|0.67|0.09|0.05|0.33|0.19|0.56|0.86|0.29|0.56|0.92|0.92|0.21|0.24|0.24|0.35|0.26|0.71|0.7|0.99|0.18|0.68|0.31|0.97|0.83|0.9|0.22|0.34|0.82|1|0.72|1|0.44|0.82|0.02|0.3|0.54|0.67|0.51|0.57|0.06|0.52|0.66|0.88|0.76|0.37|0.07|0.24|0.09|0.57|0.5|0.21|0.38|0.26|0.93|0.3|0.97|0.43|0.61|0.8|0.74|0.32|0.89|0.69|0.26|0.83|0.62|0.53|0.7|0.06|0.44|0.45|0.71|0.72|0.06|0.47|0.9|0.99|0.66|0.65|0.47|0.87|0.04|0.8|0.22|0.47|0.65|0.42|0.51|0.72|0.47|0.92|0.37|0.85|0.63|0.07|0.66|0.03|0.31|0.05|0.37|0.73|0.85|0.88|0.76|0.14|0.14|0.72|0.82|0.32|0.13|0.57|0.41|0.71|0.11|0.75|0.49|0.64|0.77|0.21|0.26|0.26|0.84|0.89|0.07|0.88|0.65|0.35|0.21|0.96|0.29|0.38|0.1|0.85|0.39|0.5|0.5|0.14|0.09|0.25|0.96|0.86|0.16|0.14|0.37|0.05|0.61|0.96|0.69|0.87|0.88|0.61|1|0.26~0~~0~`",
            "#KnSR`0~1|8|1|0|22|3|18|27|23|1|1|0|0|1|2|3|0|1|0|2|2|1|0|2|2|0|3|2|3|1|0|2|2|1|2|0|1|0|0|2|0|0|3|2|1|3|3|1|3|1|0|3|0|1|0|0|1|0|2|0|1|1|0|0|0|3|1|0|2|1|0|2|1|0|1|1|0|1|1|3|3|2|1|2|3|1|1|3|3|0|0|1|3|1|0|3|2|2|3|3|1|3|1|3|1|3|0|1|3|1|2|0|3|2|2|0|0|1|0|0|3|0|2|0|3|1|0|3|1|1|3|3|0|3|1|3|2|2|2|3|1|2|2|2|3|1|1|3|1|2|3|3|2|2|0|0|2|1|0|1|2|0|3|3|1|0|2|1|2|3|0|0|3|0|3|1|1|0|1|0|2|2|1|0|1|1|0|2|2|3|1|1|1|3|2|3|1|1|3|1|2|1|0|1|3|0|1|3|0|0|0|1|2|3|3|3|1|1|2|1|3|2|1|3|0|0|3|1|1|2|2|1|3|1|1|2|1|0|3|3|0|0|3|3|1|2|3|0|0|1|3|0|0|0|2|2|2|3|3|0|3|1|2|1|0|2|3|0|3|3|1|3|2|2|3|0|1|0|0|1|2|1|0|1|1|2|1|2|2|0|1|2|3|3|2|1|3|1|2|0|2|0|0|3|2|3|3|2|1|3|2|1|2|3|3|2|3|1|1|2|3|2|0|0|3|2|3|3|0|1|1|3|2|3|0|3|3|1|0|0|2|0|2|3|3|1|2|3|2|1|1|2|1|1|1|0|0|2|0|0|2|1|0|1|3|2|1|2|3|0|2|2|1|2|1|1|2|1|3|2|0|3|0|0|3|1|2|1|0|2|3|1|2|3|1|0|2|3|1|2|0|2|0|1|3|3|1|3|3|3|0|3|3|2|2|3|1|2|2|3|0|1|0|3|1|2|2|0|1|0|1|3|0|0|1|3|0|1|3|0|3|0|1|2|3|0|0|3|0|3|3|1|3|1|2|3|1|1|1|1|0|3|1|2|0|1|2|1|1|0|0|0|0|2|3|2|1|0|2|3|3|3|1|2|0|3|1|0|0|1|1|0|3|3|1|2|1|1|0|0|3|1|1|2|0|1|2|1|3|2|1|0|0|0|0|0|3|1|0|2|2|0|0|3|2|3|0|0|1|1|3|0|1|1|2|1|1|1|0|2|3|3|0|0|3|0|1|1|3|1|3|1|3|0|0|0|1|1|2|0|1|1|3|2|0|0|2|1|0|2|1|2|2|2|1|2|2|1|1|2|3|2|0|3|3|2|3|0|2|0|1|1|3|1|0|3|0|2|1|3|1|2|1|2|2|2|2|1|2|2|2|1|2|0|3|0|2|3|3|3|0|3|0|1|3|0|2|3|3|2|10|33|25|2|32|11|6|13|36|22|8|32|26|8|17|24|35|15|39|25|14|19|25|2|11|37|12|35|33|5|29|38|1|31|23|29|22|11|4|34|18|27|18|38|2|23|13|27|18|5|30|14|1|18|33|0|37|37|26|32|33|35|7|24|27|30|33|13|13|14|2|33|16|15|30|3|28|18|7|11|9|35|20|11|18|21|32|14|29|13|34|18|27|21|23|17|9|38|38|36|29|38|26|27|7|6|33|4|9|10|7|11|11|18|34|16|3|29|15|10|0|38|8|11|39|39|22|18|2|26|36|6|26|34|2|14|34|33|33|38|11|35|29|23|20|0|22|6|9|20|28|34|9|25|14|1|1|32|18|11|2|27|32|13|10|20|25|24|31|8|10|13|9|26|17|5|22|2|30|25|32|30|1|24|11|25|13|2|17|21|11|27|0|2|2|25|38|25|29|37|4|2|8|32|0|26|33|7|8|7|29|15|17|23|8|9|34|0|26|30|23|7|4|36|32|31|30|27|8|9|30|24|7|9|26|24|14|31|34|31|36|19|26|31|0|9|15|18|12|35|7|1|20|7|17|33|7|38|20|9|34|38|13|19|6|5|36|15|31|14|35|7|30|12|30|39|27|28|39|32|7|30|35|23|17|10|23|18|11|18|21|6|9|9|33|7|36|22|24|0|12|18|35|18|34|11|32|0|26|35|24|21|13|6|23|27|21|1|28|10|1|8|12|3|1|12|21|19|38|35|11|28|5|31|15|37|22|20|10|30|9|18|5|15|23|4|12|8|35|29|21|30|19|8|36|11|12|15|15|6|34|38|32|5|30|0|10|28|23|25|11|15|14|38|24|4|28|10|15|32|16|15|1|5|26|2|14|24|24|24|2|37|21|15|22|19|0|8|27|26|23|13|30|31|2|26|18|36|11|18|10|4|15|29|32|35|30|8|29|9|2~0~~0~~0~~0~~0~0.79|0.14|0.93|0.85|0.9|0.46|0.69|0.09|0.01|0.78|0.23|0.96|0.24|0.12|0.28|0.77|0.67|0.81|0.4|0.06|0.47|0.83|0.75|0.02|0.19|0.88|0.37|0.32|0.3|0.2|0.52|0.24|0.67|0.31|0.33|0.62|0.56|0.17|0.31|0.96|0.34|0.28|0.23|0.39|0.24|0.18|0.25|0.66|0.13|0.1|0.84|0.26|0.78|0.28|0.51|0.81|0.62|0.5|0.6|0.79|0.86|0.83|0.91|0.69|0.74|0.11|0.94|0.88|0.77|0.29|0.06|0.62|0.5|0.79|0.08|0.28|0.54|0.45|0.96|0.68|0.27|0.47|0.53|0.54|0.4|0.48|0.05|0.57|0.21|0.16|0.24|0.11|0.89|0.04|0.64|0.82|0.77|0.92|0.74|0.88|0.64|0.12|0.11|0.74|0.2|0.95|0.79|0.29|0.07|0.5|0.83|0.44|0.95|0.92|0.34|0.04|0.79|0.96|0.68|0.33|0.2|0.83|0.81|0.19|0.8|0.25|0.98|0.63|0.46|0.24|0.42|0.34|0.34|0.33|0.39|0.33|0.24|0.97|0.41|0.38|0.03|0.05|0.6|0.52|0.34|0.49|0.7|0.59|0.4|0.62|0.51|0.1|0.84|0.24|0.9|0.21|0.73|0.13|0.6|0.29|0.66|0.22|0.42|0.4|0.33|0.43|0.42|0.28|0.77|0.71|0.79|0.04|0.64|0.13|0.62|0.68|0.46|0.64|0.42|0.04|0.12|0.38|0.43|0.3|0.75|0.52|0.89|0.75|0.8|0.21|0.52|0.04|0.21|0.9|0.36|0.63|0.46|0.11|0.27|0.01|0.34|0.97|0.28|0.57|0.83|0.24|0.7|0.49|0.68|0.02|0.21|0.14|0.66|0.1|0.31|0.23|0.02|0.52|0.36|0.95|0.75|0.39|0.99|0.85|0.19|0.45|0.37|0.64|0.09|0.42|0.46|0.56|0.89|0.58|0.51|0.52|0.82|0.77|0.52|0.73|0.85|0.27|0.23|0.2|0.51|0.39|0.37|0.61|0.25|0.22|0.41|0.84|0.25|0.64|0.42|0.98|0.82|0.06|0.02|0.26|0.29|0.02|0.16|0.52|0.09|0.18|0.18|0.11|0.81|0.13|0.59|0.94|0.17|0.95|0.55|0.15|0.03|0.58|0.6|0.97|0.92|0.69|0.78|0.47|0.43|0.9|0.55|0.99|0.82|0.9|0.31|0.98|0.88|0.49|0.71|0.24|0.43|0.81|0.78|0.92|0.93|0.81|0.13|0.08|0.7|0.61|0.45|0.87|0.13|0.07|0.97|0.72|0.59|0.44|0.62|0.7|0.62|0.05|0.7|0.29|0.65|0.82|0.46|0.68|0.35|0.97|0.37|0.48|0.68|0.08|0.36|0.97|0.09|0.81|0.23|0.08|0.49|0.54|0.55|0.08|0.6|0.24|0.71|0.44|0.79|0.5|0.02|0.22|0.74|0.81|0.67|0.21|0.4|0.72|0.49|0.55|0.61|0.99|0.79|0.36|0.98|0.63|0.65|0.97|0.15|0.9|0.01|0.35|0.73|0.21|0.12|0.28|0.37|0.11|0.78|0.27|0.29|0.36|0.22|0.39|0.12|0.11|0.1|0.8|0.92|0.17|0.27|0.3|0.77|0.67|0.38|0.97|0.63|0.59|0.8|0.39|0.32|0.39|0.16|0.87|0.96|0.62|0.33|0.36|0.84|0.95|0.23|0.97|0.97|0.36|1|0.9|0.81|0.33|0.32|0.65|0.98|0.53|0.25|0.47|0.09|0.37|0.27|0.29|0.09|0.33|0.94|0.8|0.68|0.95|0.32|0.11|0.08|0.4|0.08|0.52|0.67|0.23|0.35|0.15|0.53|0.43|0.88|0.18|0.15|0.1|0.23|0.42|0.85|0.32|0.1|0.56|0.18|0.26|0.75|0.71|0.35|0.84|0.92|0.5|0.1|0.51|0.03|0.47|0.69|0.38|0.22|0.24|0.72|0.48|0.86|0.32|0.54|0.08|0.99|0.57|0.42|0.2|0.5|0.92|0.2|0.22|0.49|0.93|0.74|0.84|0.27|0.82|0.29|0.99|0.76|0.67|0.13|0.09|0.74|0.87|0.51|1|0.44|0.49|0.46|0.22|0.7|0.37|0.4|0.21|0.94|0.47|0.6|0.16|0.33|0.79|0.72|0.81|0.72|0.2|0.83|0.23|0.64|0.07|0.64|0.58|0.22|0.52|0.12|0.47|0.56|0.8|0.21|0.93|0.3|0.29|0.07|0.11|0.69|0.29|0.86|0.3|0.82|0.24|0.64|0.98|0.6|0.37|0.36|0.96|0.62|0.69|0.03|0.79|0.16|0.33|0.31|0.22|0.51|0.39|0.78|0.44|0.83|0.2|0.74|0.68|0.18|0.28|0.46|0.95|0.46|0.81|0.35|0.25|0.06|0.47|0.41|0.91|0.19|0.37|0.96|0.79|0.25|0.72|0.95|0.69|0.45|0.52|0.4|0.92|0.31|1|0.87|0.41|0.57|0.81|0.48|0.54|0.66|0.22|0.22|0.73|0.17|0.64|0.73|0.32|0.55|0.86|0.77|0.59|0.23|0.04|0.9|0.13|0.04|0.18|0.95|0.74|0.84|0.34|0.49|0.77|0.11|0.51|0.44|0.19|0.66|0.09|0.98|0.51|0.48|0.18|0.6|0.38|0.51|0.43|0.36|0.08|0.95|0.13|0.3|0.53|0.63|0.01|0.46|0.38|0.91|0.85|0.93|0.27|0.5|0.78|0.52|0.21|0.02|0.93|0.69|0.63|0.9|0.84|0.65|0.16|0.04|0.61|0.08|0.41|0.05|0.47|0.08|0.79|0.48|0.94|0.71|0.97|0.05|0.2|0.67|0.19|0.14|0.78|0.92|0.01|0.33|0.09|0.34|0.4|0.22|0.43|0.29|0.07|0.38|0.15|0.19|0.96|0.63|0.88|0.84|0.84|0.89|0.93|0.38|0.58|0.01|0.74|0.16|0.06|0.11|0.9|0.41|0.48|0.87|0.49|0.61|0.56|0.82|0.01|0.12|0.04|0.71|0.57|0.91|0.93|0.12|0.57|0.21|0.27|0.66|0.1|0.16|0.95|0.65|0.87|0.14|0.36|0.92|0.27|0.75|0.4|0.45|0.73|0.75|0.81|0.36|0.1|0.81|0.25|0.71|0.76|0.42|0.6|0.83|0.32|0.27|0.17|0.33|0.35|0.34|0.68|0.43|0.47|0.71|0.61|0.46|0.35|0.62|0.98|0.29|0.77|0.39|0.4|0.69|0.33|0.35|0.42|0.14|0.43|0.96|0.18|0.62|0.24|0.98|0.7|0.74|0.74|0.87|0.62|0.08|0.56|0.2|0.1|0.45|0.51|0.45|0.26|0.67|0.39|0.67|0.46|0.28|0.98|0.7|0.96|0.69|0.59|0.64|0.67|0.92|0.06|0.43|0.88|0.25|0.02|0.06|0.46|0.72|0.11|0.28|0.22|0.33|0.54|0.56|0.54|0.25|0.68|0.73|0.08|0.74|0.73|0.14|0.01|0.16|0.93|0.86|0.4|0.09|0.87|0.59|0.89|0.86|0.1|0.81|0.3|0.27|1|0.93|0.67|0.94|0.6|0.08|0.57|0.08|0.05|0.6|0.01|0.23|0.34|0.78|0.33|0.67|0.13|0.81|0.4|0.27|0.24|0.17|0.35|0.01|0.11|0.88|0.6|0.08|0.47|0.23|0.08|0.66|0.53|0.88|0.16|0.64|0.47|0.97|0.64|0.03|0.26|0.29|0.08|0.69|1|0.43|0.99|0.89|0.99|0.18|0.94|0.95|0.89|0.71|0.34|0.56|0.45|0.78|0.87|0.09|0.22|0.14|0.79|0.12|0.19|0.9|0.1|0.85|0.56|0.65|0.95|0.44|0.38|0.67|0.36|0.81|0.89|0.2|0.62|0.13|0.91|0.76|0.53|0.82|0.93|0.66|0.17|0.43|0.61|0.48|0.37|0.36|0.11|0.1|0.9|0.98|0.28|0.13|0.6|0.97|0.01|0.55|0.17|0.52|0.86|0.5|0.42|0.59|0.48|0.12|0.82|0.02|0.33|0.22|0.76|0.67|0.75|0.17|0.41|0.31|0.42|0.59|0.67|0.32|0.41|0.04|0.89|0.57|0.96|0.11|0.09|0.99|0.96|0.61|0.04|0.12|0.33|0.05|0.44|0.16|0.42|0.53|0.32|0.87|0.21|0.53|0.8|0.42|0.22|0.83|0.76|0.99|0.58|0.31|0.02|0.02|0.18|0.51|0.3|0.62|0.45|0.26|0.44|0.75|0.06|0.2|0.96|0.39|0.11|0.19|0.15|0.68|0.42|0.57|0.93|0.51|0.83|0.72|0.87|0.78|0.87|0.23|0.34|0.37|0.5|0.77|0.37|0.84|0.4|0.79|0.56|0.97|0.5|0.18|0.25|0.02|0.98|0.61|0.84|0.36|0.92|0.47|0.76|0.39|0.33|0.97|0.78|0.84|0.07|0.59|0.57|0.47|0.62|0.37|0.99|0.21|0.51|1|0.52|0.86|0.68|0.41|0.08|0.56|0.2|0.15|0.5|0.31|0.29|0.84|0.46|0.27|0.05|0.86|0.77|0.53|0.66|0.74|0.7|0.83|0.9|0.54|0.78|0.72|0.71|0.2|0.77|0.9|0.84|0.36|0.72|0.68|0.64|0.8|0.64|0.17|0.97|0.31|0.11|0.26|0.19|0.13|0.5|0.75|0.39|0.4|0.69|0.6|0.76|0.15|0.91|0.26|0.05|0.82|0.17|0.16|0.29|0.69|0.03|0.42|0.86|0.77|0.18|0.35|0.23|0.39|0.16|0.86|0.03|0.02|0.03|0.84|0.85|0.16|0.46|0.62|0.27|0.85|0.45|0.58|0.03|0.12|0.54|0.33|0.06|0.54|0.75|0.14|0.6|0.41|0.7|0.36|0.36|0.81|0.83|0.46|0.52|0.82|0.12|0.77|0.08|0.23|0.04|0.89|0.31|0.93|0.63|0.95|0.46|0.03|0.29|0.76|0.1|0.58|0.7|0.02|0.04|0.97|0.35|0.18|0.36|0.03|0.74|0.65|0.53|0.5|0.66|0.13|0.01|0.65|0.22|0.78|0.47|0.66|0.67|0.59|0.32|0.81|0.39|0.14|0.83|0.64|0.37|0.82|0.88|0.65|0.74|0.11|0.57|0.21|0.87|0.06|0.71|0.94|0.92|0.71|0.79|0.82|0.63|0.01|0.22|0.85|0.94|0.93|0.57|0.44|0.33|0.22|0.24|0.39|0.73|0.06|0.22|0.08|0.45|0.37|0.11|0.95|0.98|0.64|0.18|0.38|0.36|0.49|0.39|0.67|0.78|0.67|0.08|0.67|0.57|0.34|0.87|0.53|0.81|0.02|0.87|0.13|0.98|0.24|0.7|0.2|0.29|0.23|0.19|0.39|0.75|0.02|0.13|0.42|0.92|0.15|0.79|0.75|0.11|0.18|0.08|0.45|0.15|0.22|0.98|0.79|0.73|0.13|0.06|0.84|0.3|0.97|0.38|0.28|0.07|0.36|0.28|0.04|0.5|0.49|0.79|0.53|0.71|0.91|0.68|0.51|0.74|0.1|0.67|0.91|0.68|0.37|0.75|0.69|0.23|0.64|0.19|0.34|0.49|0.06|0.87|0.13|0.68|0.17|0.51|0.46|0.01|0.46|0.6|0.16|0.85|0.77|0.19|0.7|0.62|0.17|0.11|0.36|0.79|0.05|0.82~0~~0~`",
            "#KnSR`0~1|10|2|1|13|19|35|27|0|0|2|3|0|3|0|1|2|2|0|3|3|3|2|0|1|1|2|1|1|3|2|0|3|2|3|3|3|3|2|0|2|0|1|2|2|0|0|1|3|1|0|1|1|3|0|3|0|2|2|2|1|2|3|0|3|2|0|3|1|3|1|1|3|2|3|0|0|1|0|2|0|2|1|1|0|3|2|3|0|3|1|0|2|1|0|1|0|0|2|3|0|0|0|3|1|3|0|2|3|0|1|2|2|3|3|1|0|3|3|3|1|0|1|3|0|2|3|2|1|0|1|0|1|1|0|0|1|3|1|1|3|1|3|3|0|2|2|2|1|3|0|3|1|1|2|3|0|3|2|3|0|0|1|2|3|1|1|1|2|0|0|1|2|3|1|1|2|1|1|3|1|3|2|0|0|2|0|1|3|1|1|1|1|2|1|3|0|2|1|1|0|1|2|3|1|2|2|2|3|2|2|2|0|1|2|0|2|2|0|3|2|2|3|2|1|3|1|2|2|2|3|0|1|3|2|1|3|1|2|1|3|1|0|1|0|2|0|1|2|2|2|2|0|1|2|3|1|1|1|2|0|2|2|2|3|3|0|0|1|3|1|1|3|1|0|2|1|3|0|3|0|3|0|2|1|3|3|0|1|0|0|2|0|3|3|0|3|0|2|2|3|3|1|2|3|1|2|3|0|2|0|2|3|3|2|0|1|1|1|1|1|2|3|1|3|2|0|3|1|0|0|1|2|2|2|3|1|1|3|1|3|0|3|1|0|0|0|0|3|0|0|0|2|0|3|0|3|3|2|1|1|2|1|1|2|3|1|2|0|1|1|1|3|2|2|3|2|2|0|0|3|2|2|0|0|3|0|2|1|1|1|1|2|2|3|0|0|0|3|2|3|3|0|1|3|1|3|1|3|0|3|0|1|3|0|1|1|0|3|1|1|0|1|3|1|2|3|1|2|2|1|0|3|1|1|1|2|0|3|1|3|3|1|2|0|3|1|2|1|0|3|1|1|2|1|1|1|2|0|2|1|1|3|1|2|3|1|3|1|0|0|2|1|0|3|2|1|2|1|2|0|0|0|3|0|1|1|0|3|3|0|3|1|1|1|0|1|2|2|1|2|2|0|3|3|2|1|0|0|1|1|0|0|2|3|2|3|2|1|1|1|2|2|2|0|2|2|0|0|1|2|2|2|1|3|3|3|0|0|2|1|2|1|1|3|2|1|2|1|0|1|1|3|1|3|0|0|2|0|0|0|3|2|2|3|0|3|3|1|2|2|3|1|3|2|1|1|2|1|3|2|3|2|2|2|3|1|1|0|3|3|2|1|3|2|0|2|2|0|2|3|3|0|2|2|2|0|0|3|0|0|2|1|2|0|1|1|0|1|2|0|0|3|2|1|2|0|2|0|3|1|3|3|0|1|0|1|3|1|2|3|0|3|0|0|1|0|1|1|1|3|0|3|0|1|2|0|2|3|1|1|2|3|2|2|1|1|2|3|2|1|1|1|2|2|1|2|2|3|3|3|3|0|2|1|1|1|3|2|30|38|6|10|13|8|28|17|26|39|18|30|25|34|13|5|25|24|36|27|18|29|29|24|23|33|8|10|5|32|4|8|20|12|22|13|19|34|3|33|7|10|23|19|16|34|33|9|32|16|6|28|8|10|30|11|20|20|8|22|35|15|10|0|36|8|18|14|32|28|10|1|19|2|17|5|32|35|12|6|11|32|2|5|13|19|35|31|25|10|22|25|23|1|21|18|7|21|1|20|37|15|10|11|10|17|3|2|28|7|32|25|24|21|16|18|23|15|16|18|24|18|23|9|8|23|36|6|31|18|28|9|11|38|19|24|35|30|32|16|33|14|9|38|5|11|21|23|39|27|31|38|17|22|38|6|3|31|6|2|34|34|15|37|24|35|31|24|0|20|19|38|2|8|10|21|24|3|14|33|9|5|16|36|17|35|7|16|31|5|14|23|18|9|29|3|21|25|3|8|7|30|33|19|34|17|34|3|12|24|30|17|0|17|34|15|28|34|16|20|7|23|28|29|29|33|16|5|13|9|3|7|39|34|12|8|18|17|12|3|17|32|7|18|4|19|15|7|39|20|3|26|12|0|17|7|4|18|38|24|22|7|3|37|30|26|29|10|12|34|0|35|35|9|17|14|7|12|11|33|10|13|34|15|10|12|27|7|37|19|22|27|5|4|9|34|36|12|31|26|12|37|20|12|7|22|11|30|22|31|9|7|36|15|36|36|4|6|36|38|32|15|30|1|12|30|7|28|1|34|20|35|37|20|4|3|37|1|29|9|28|25|5|34|23|29|23|3|29|29|39|39|5|16|25|36|12|9|35|16|3|22|19|21|25|21|2|5|1|5|29|12|2|32|23|9|14|22|28|5|35|32|22|17|26|34|31|30|15|15|3|7|15|24|32|16|15|16|24|11|4|27|32|1|16|31|19|22|31|11|11|10|11|28|13|35|24|26|9|26|29|4|18|13|16|20|8|28|6|23|8|22|9|30|14|27|16|18|28|20|27|28|7|0|5~0~~0~~0~~0~~0~0.04|0.52|0.7|0.39|0.01|0.13|0.46|0.62|0.39|0.73|0.77|0.24|0.25|0.16|0.29|0.12|0.77|0.67|0.33|0.91|0.92|0.3|0.54|1|0.54|0.53|0.34|0.88|0.94|0.12|0.25|0.82|0.33|0.29|0.72|0.93|0.35|0.53|0.49|0.08|0.5|0.62|0.2|0.22|0.81|0.67|0.59|0.26|0.68|0.53|0.65|0.53|0.21|0.9|0.01|1|1|0.23|0.53|0.15|0.93|0.47|0.43|0.15|0.23|0.03|0.56|0.99|0.06|0.13|0.03|0.54|0.22|0.98|0.3|0.97|0.54|0.07|0.07|0.75|0.89|0.37|0.62|0.49|0.73|0.6|0.25|0.51|0.44|0.9|0.51|0.06|0.59|0.08|0.96|0.56|0.06|0.75|0.38|0.31|0.1|0.09|0.53|0.62|0.45|0.67|0.52|0.64|0.08|0.33|0.71|0.5|0.81|0.06|0.66|0.68|0.21|0.94|0.1|1|0.44|0.49|0.86|0.99|0.7|0.21|0.13|0.05|0.12|0.97|0.42|0.74|0.22|0.84|0.14|0.51|0.45|0.53|0.2|0.23|0.25|0.24|0.37|0.91|0.74|0.31|0.7|0.02|0.22|0.12|0.69|0.38|0.67|0.17|0.19|0.87|0.69|0.06|0.81|0.6|0.35|0.28|0.94|0.35|0.87|0.39|0.58|0.1|0.73|0.48|0.5|0.48|0.88|0.4|0.6|0.22|0.56|0.23|0.67|0.4|0.06|0.71|0.09|0.39|0.04|0.18|0.9|0.21|0.5|0.25|0.02|0.73|0.71|0.12|0.71|0.01|0.68|0.02|0.19|0.13|0.57|0.01|0.09|0.7|0.52|0.36|0.96|0.7|0.47|0.66|0.78|0.1|0.97|0.21|0.23|0.6|0.17|0.02|0.36|0.49|0.32|0.08|0.07|0.91|0.69|0.68|0.64|0.67|0.41|0.81|0.55|0.18|0.33|0.62|0.21|0.27|0.41|0.2|0.33|0.12|0.78|1|0.69|1|0.08|0.94|0.01|0.82|0.07|0.84|0.84|0.07|0.42|0.39|0.8|0.9|0.31|0.76|0.98|0.2|0.29|0.09|0.47|0.32|0.92|0.87|0.23|0.33|0.08|0.85|0.04|0.06|0.04|0.49|0.73|0.56|0.27|0.53|0.31|0.51|0.22|0.3|0.27|0.74|0.71|0.14|0.73|0.55|0.65|0.92|0.34|0.93|0.8|0.53|0.74|0.67|0.09|0.35|0.05|0.21|0.58|0.63|0.78|0.42|0.88|0.1|0.49|0.09|0.07|0.34|0.71|0.36|0.94|0.05|0.08|0.74|0.32|0.49|0.27|0.9|0.94|0.62|0.77|0.46|0.73|0.89|0.8|0.31|0.84|0.55|0.92|0.8|0.36|0.87|0.66|0.85|0.12|0.62|0.7|0.69|0.71|0.05|0.65|0.33|0.14|0.24|0.25|0.27|0.83|0.83|0.49|0.7|0.04|0.58|0.09|0.22|0.33|0.66|0.56|0.84|0.82|0.06|0.04|0.49|0.85|0.47|0.26|0.6|0.98|0.17|0.25|0.04|0.64|0.14|0.61|0.42|0.29|0.34|0.06|0.98|0.11|0.84|0.02|0.88|0.5|0.82|0.27|0.91|0.82|0.66|0.52|0.31|0.89|0.4|0.31|0.28|0.2|0.6|0.94|0.04|0.93|0.44|0.49|0.11|0.13|0.78|0.36|0.73|0.08|0.18|0.99|0.63|0.86|0.76|0.9|1|0.1|0.91|0.12|0.31|0.24|0.24|0.91|0.69|0.89|0.97|0.23|0.65|0.55|0.96|0.65|0.91|0.89|0.76|0.88|0.4|0.1|0.57|0.82|0.14|0.15|0.47|0.44|0.72|0.79|0.6|0.38|0.65|0.81|0.53|0.82|0.45|0.43|0.05|0.36|0.79|1|0.13|0.4|0.4|0.16|0.22|0.63|0.01|0.01|0.6|0.37|0.84|0.97|0.69|0.09|0.45|0.25|0.78|0.61|0.43|0.57|0.8|0.84|0.48|0.1|0.45|0.14|0.97|0.14|0.35|0.77|0.37|0.42|0.44|0.68|0.8|0.61|0.81|0.64|0.45|0.54|0.83|0.91|0.8|0.66|0.22|0.61|0.64|0.24|0.74|0.73|0.21|0.54|0.37|0.43|0.23|0.28|0.58|0.04|0.55|0.39|0.22|0.44|0.76|0.05|0.24|0.94|0.87|0.8|0.33|0.49|0.72|0.97|0.88|0.82|0.81|0.54|0.37|0.12|0.36|0.34|0.59|1|0.95|0.22|0.46|0.55|0.49|0.06|0.81|0.32|0.24|0.09|0.46|0.67|0.35|0.61|0.96|0.73|0.49|0.75|0.65|0.7|0.73|0.47|0.88|0.67|0.45|0.99|0.04|0.59|0.14|0.58|0.05|0.74|0.01|0.12|0.99|0.7|0.26|0.22|0.06|0.56|0.28|0.37|0.11|0.92|0.68|0.76|0.56|0.87|0.63|0.52|0.79|0.77|0.28|0.83|0.09|0.49|0.01|0.5|0.99|0.14|0.8|0.63|0.59|0.17|0.45|0.35|0.34|0.91|0.85|0.05|0.23|0.47|0.22|0.83|0.75|0.59|0.3|0.26|0.1|0.12|0.64|0.03|0.12|0.39|0.02|0.76|0.81|0.14|0.22|0.79|0.25|0.93|0.13|0.57|0.38|0.39|0.56|0.71|0.8|0.34|0.27|0.59|0.64|0.3|0.97|0.21|0.19|0.97|0.46|0.02|0.04|0.92|0.88|0.72|0.08|0.16|0.23|0.59|0.71|0.45|0.12|0.4|0.81|0.98|0.27|0.26|0.9|0.34|0.75|0.61|0.07|0.04|0.77|0.18|0.89|0.15|0.19|0.47|1|0.74|0.34|0.4|0.99|0.02|0.09|0.33|0.52|0.1|0.79|0.7|0.57|0.82|0.85|0.88|0.12|0.59|0.75|0.31|0.01|0.28|0.43|0.56|0.26|0.17|0.09|0.61|0.17|0.7|0.56|0.68|0.06|0.41|0.97|0.48|0.31|0.77|0.99|0.04|0.3|0.86|0.53|0.88|0.46|0.26|0.27|0.74|0.41|0.4|0.45|0.07|0.46|0.81|0.3|0.61|0.63|0.16|0.27|0.65|0.58|0.4|0.03|0.92|0.27|0.14|0.88|0.5|0.79|0.39|0.34|0.52|0.28|1|0.2|0.48|0.69|0.53|0.2|0.26|0.33|0.78|0.21|0.74|0.86|0.43|0.16|0.89|0.5|0.63|0.15|0.08|0.95|0.56|0.72|0.17|0.32|0.01|0.36|0.53|0.43|0.48|0.08|0.3|0.25|0.23|0.88|1|0.2|0.66|0.97|0.32|0.24|0.1|0.32|0.17|0.06|0.24|0.1|0.91|0.68|0.4|0.08|0.01|0.68|0.02|0.96|0.54|0.44|0.9|1|1|0.26|0.12|0.98|0.02|0.3|0.16|0.93|0.79|0.44|0.45|0.82|0.11|0.68|0.72|0.07|0.69|0.35|0.41|0.86|0.48|0.77|0.6|0.37|0.26|0.29|0.41|0.45|0.44|0.14|0.09|1|0.2|0.34|0.24|0.4|0.44|0.29|0.23|0.61|0.67|0.6|0.91|0.61|0.95|0.79|0.08|0.67|0.97|0.41|0.7|0.63|0.36|0.15|0.58|0.55|0.5|0.27|0.59|0.5|0.89|0.2|0.77|0.35|0.91|0.72|0.96|0.21|0.54|0.65|0.73|0.68|0.87|0.09|0.72|0.76|0.4|0.09|0.48|0.55|0.12|0.73|0.3|0.65|0.29|0.14|0.72|0.48|0.4|0.62|0.59|0.4|0.22|0.89|0.13|0.53|0.7|0.47|0.86|0.1|0.12|0.42|0.17|0.13|0.48|0.79|0.63|0.73|0.3|0.68|0.93|0.01|0.73|0.24|0.42|0.21|0.68|0.25|0.94|0.08|0.64|0.6|0.21|0.95|0.8|0.13|0.92|0.55|0.21|0.27|0.65|0.92|0.24|0.5|0.75|0.45|0.82|0.65|0.26|0.57|0.84|0.5|0.54|0.25|0.87|0.02|0.53|0.65|0.44|0.19|0.46|0.99|0.34|0.66|0.76|0.44|0.41|0.47|0.73|0.57|0.72|0.21|0.8|0.42|0.84|0.05|0.02|0.31|0.71|0.88|0.64|0.33|0.54|0.09|0.75|0.59|0.95|0.23|0.94|0.71|0.74|0.36|0.98|0.04|0.56|0.46|0.55|0.49|0.81|0.6|0.03|0.08|0.44|0.77|0.79|0.42|0.18|0.25|0.57|0.81|0.57|0.11|1|0.26|0.12|0.16|0.1|0.45|0.53|0.9|0.9|0.4|0.29|0.94|0.49|0.73|0.7|0.67|0.84|0.89|0.17|0.22|0.86|0.23|0.36|0.04|0.43|0.19|0.2|0.2|0.73|0.45|0.87|0.6|0.28|0.01|0.38|0.55|0.47|0.31|0.39|0.22|0.67|0.11|0.12|0.02|0.13|0.94|0.92|0.87|0.12|0.56|0.04|0.45|0.3|0.76|0.41|0.98|0.84|0.53|0.94|0.18|0.74|0.76|0.36|0.04|0.33|0.7|0.29|0.02|0.92|0.87|0.44|0.5|0.17|0.01|0.84|0.75|0.93|0.44|0.84|0.99|0.89|0.28|0.66|0.41|0.31|0.38|0.57|0.22|0.89|0.44|0.53|0.12|0.72|0.08|0.9|0.07|0.14|0.76|0.32|0.89|0.3|0.09|0.02|0.13|0.67|0.79|0.47|0.91|0.23|0.96|0.99|0.26~0~~0~`"
        };
        #endregion

        public DungeonMazeMapTests(ITestOutputHelper output) => _output = output;

        /// <summary>
        /// Tests that all doors that are made in rooms are in the door structure, with known sequences that cause
        /// issues if area merges are incorrectly recorded/points are incorrectly selected.
        /// </summary>
        [Theory]
        [MemberDataEnumerable(nameof(TrueClosestEdgeCaseGenerators))]
        public void TunnelsConnectedToTrueClosest(string generatorSerialized)
        {
            // Use a generator with the seed known to cause an issue in a minimalistic case
            var rng = new KnownSeriesRandom();
            rng.StringDeserialize(generatorSerialized);

            // Generate a map
            var generator = new Generator(40, 40);
            generator
                .ConfigAndGenerateSafe((gen) =>
                {
                    gen.AddSteps(GoRogue.MapGeneration.DefaultAlgorithms.DungeonMazeMapSteps(
                        minRooms: 1, maxRooms: 1, roomMinSize: 5, roomMaxSize: 11, saveDeadEndChance: 0, rng: rng));
                });

            // Find components we're expecting
            var rooms = generator.Context.GetFirst<ItemList<Rectangle>>("Rooms");
            var wallFloor = generator.Context.GetFirst<IGridView<bool>>("WallFloor");
            var doors = generator.Context.GetFirst<DoorList>("Doors");

            // Print map representation to assist in debugging if test fails
            _output.WriteLine("Map: ");
            _output.WriteLine(wallFloor.ExtendToString(elementStringifier: i => i ? "." : "#"));

            // Go through each room and verify the correct items are there.
            foreach (var (room, _) in rooms)
            {
                _output.WriteLine($"Performing check on room: {room}");
                // Find all doors with a naive algorithm
                var holes = new HashSet<Point>();
                foreach (var edgePoint in room.Expand(1, 1).PerimeterPositions())
                    if (wallFloor[edgePoint])
                        holes.Add(edgePoint);

                // Find list of rooms in door list for the room we're working with, and make sure it contains the same
                // doors as are actually there.
                var doorListForCurrentRoom = doors.DoorsPerRoom[room];
                Assert.Equal(holes, new HashSet<Point>(doorListForCurrentRoom.Doors));
                Assert.Equal(holes, doorListForCurrentRoom.Select(pair => pair.Item).ToHashSet());
            }
        }

        /// <summary>
        /// Checks using an array of random seeds to ensure that DungeonMazeMap generation does not produce unexpected
        /// doors.
        /// </summary>
        [Fact]
        public void AllDoorsRecorded()
        {
            for (int i = 0; i < 500; i++)
            {
                // Use a particular generator so that we know the seed and thus have a replicable procedure if there
                // is an issue
                var rng = new MizuchiRandom();
                _output.WriteLine($"Using generator with states: {rng.StateA}, {rng.StateB}");

                // Generate a map
                var generator = new Generator(40, 40);
                generator
                    .ConfigAndGenerateSafe(gen =>
                    {
                        gen.AddSteps(GoRogue.MapGeneration.DefaultAlgorithms.DungeonMazeMapSteps(
                            minRooms: 1, maxRooms: 1, roomMinSize: 5, roomMaxSize: 11, saveDeadEndChance: 0, rng: rng));
                    });

                // Find components we're expecting
                var rooms = generator.Context.GetFirst<ItemList<Rectangle>>("Rooms");
                var wallFloor = generator.Context.GetFirst<IGridView<bool>>("WallFloor");
                var doors = generator.Context.GetFirst<DoorList>("Doors");

                // Go through each room and verify the correct items are there.
                foreach (var (room, _) in rooms)
                {
                    // Find all doors with a naive algorithm
                    var holes = new HashSet<Point>();
                    foreach (var edgePoint in room.Expand(1, 1).PerimeterPositions())
                        if (wallFloor[edgePoint])
                            holes.Add(edgePoint);

                    // Find list of rooms in door list for the room we're working with, and make sure it contains the same
                    // doors as are actually there.
                    var doorListForCurrentRoom = doors.DoorsPerRoom[room];
                    Assert.Equal(holes, new HashSet<Point>(doorListForCurrentRoom.Doors));
                    Assert.Equal(holes, doorListForCurrentRoom.Select(pair => pair.Item).ToHashSet());
                }
            }
        }
    }
}
